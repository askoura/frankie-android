{"version":3,"file":"ParagraphQuestion-legacy-CCjHnc_K.js","sources":["../../src/components/Questions/Paragraph/ParagraphQuestion.jsx"],"sourcesContent":["import React from \"react\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\n\nimport styles from \"./ParagraphQuestion.module.css\";\nimport { valueChange } from \"~/state/runState\";\nimport { setDirty } from \"~/state/templateState\";\n\nfunction ParagraphQuestion(props) {\n  const state = useSelector((state) => {\n    let questionState = state.runState.values[props.component.qualifiedCode];\n    let show_errors = state.runState.values.Survey.show_errors;\n    let isDirty = state.templateState[props.component.qualifiedCode];\n    let validity = questionState?.validity;\n    let invalid = (show_errors || isDirty) && validity === false;\n    let value = questionState?.value || \"\";\n    return {\n      value: value,\n      wordCount: window.FrankieScripts\n        ? window.FrankieScripts.wordCount(value)\n        : 0,\n      invalid: invalid,\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const { t } = useTranslation(\"run\");\n\n  const handleChange = (event) => {\n    dispatch(\n      valueChange({\n        componentCode: event.target.name,\n        value: event.target.value,\n      })\n    );\n  };\n\n  const lostFocus = (event) => {\n    dispatch(setDirty(event.target.name));\n  };\n\n  return (\n    <div className={styles.questionItem}>\n      <TextareaAutosize\n        className={styles.paragraph}\n        required={\n          props.component.validation?.validation_required?.isActive\n            ? true\n            : false\n        }\n        id={props.component.qualifiedCode}\n        name={props.component.qualifiedCode}\n        minRows={props.component.minRows || 2}\n        label={props.component.content?.hint || \"\"}\n        onChange={handleChange}\n        onBlur={lostFocus}\n        value={state.value}\n      />\n      {props.component.showWordCount ? (\n        <div className={styles.wordCount}>\n          <span>{t(\"word_count\", { count: state.wordCount })}</span>\n        </div>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n\nexport default ParagraphQuestion;\n"],"names":["ParagraphQuestion","props","_props$component$vali","_props$component$cont","state","useSelector","questionState","runState","values","component","qualifiedCode","show_errors","Survey","isDirty","templateState","validity","invalid","value","wordCount","window","FrankieScripts","shallowEqual","dispatch","useDispatch","_useTranslation","useTranslation","t","handleChange","event","valueChange","componentCode","target","name","lostFocus","setDirty","jsxs","className","styles","questionItem","children","jsx","TextareaAutosize","paragraph","required","validation","validation_required","isActive","id","minRows","label","content","hint","onChange","onBlur","showWordCount","count"],"mappings":"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"}