import{r as m,j as o,X as z}from"./index-_S4YwDqB.js";import{w as h,x as C,y as w,Q as b,C as f,E as x,z as k}from"./Android-C-a1KXUo.js";import{G as v}from"./Grid-HavWmV_Q.js";const E="_imageGrid_gkz8d_1",S="_imageContainer_gkz8d_5",q="_rankContainer_gkz8d_11",W="_rankValue_gkz8d_19",g={imageGrid:E,imageContainer:S,rankContainer:q,rankValue:W};function V(e){const n=h(t=>{let i={};return e.component.answers.forEach(c=>{i[c.qualifiedCode]=t.runState.values[c.qualifiedCode].value}),i},C),s=w(),a=m.useRef(null),[u,r]=m.useState(800);m.useEffect(()=>{var t;r((t=a==null?void 0:a.current)==null?void 0:t.offsetWidth)},[a]);const d=(u-e.component.columns*e.component.spacing*2)/e.component.columns,l=d/(e.component.imageAspectRatio||1);m.useEffect(()=>{const t=()=>{var i;r((i=a==null?void 0:a.current)==null?void 0:i.offsetWidth)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);const y=t=>{if(s(x(e.component.qualifiedCode)),s(x(e.parentCode)),+n[t]>0)s(k({componentCode:t,undefined:void 0}));else{let c=Object.keys(n),_=c.map(j=>n[j]);for(var i=1;i<=c.length;i++)if(!_.includes(i)){s(k({componentCode:t,value:i}));return}}};return h(t=>t.runState.values.Survey.lang),o.jsx(v,{ref:a,container:!0,className:g.imageGrid,children:e.component.answers.map(t=>o.jsx(G,{option:t,spacing:e.component.spacing,columns:e.component.columns,hideText:e.component.hideText,onClick:()=>y(t.qualifiedCode),parentCode:e.component.qualifiedCode,imageHeight:l,imageWidth:d},t.qualifiedCode))})}function G(e){var u,r;const n=z(),s=h(d=>{let l=d.runState.values[e.option.qualifiedCode];return{showAnswer:typeof(l==null?void 0:l.relevance)>"u"||l.relevance,value:(l==null?void 0:l.value)||0}},C),a=(u=e.option.resources)!=null&&u.image?"url('".concat(b(e.option.resources.image),"')"):"0";return o.jsxs(v,{item:!0,xs:12/e.columns,children:[o.jsx(f,{className:g.imageContainer,onClick:()=>e.onClick(),display:"flex",justifyContent:"center",alignItems:"center",style:{backgroundImage:a,backgroundColor:n.palette.background.default,margin:e.spacing+"px",boxShadow:2,height:e.imageHeight+"px",border:s.checked?"2px solid ".concat(n.palette.primary.main):"2px solid transparent"},children:s.value>0&&o.jsx("div",{style:{height:Math.min(e.imageHeight,e.imageWidth)+"px",width:Math.min(e.imageHeight,e.imageWidth)+"px",borderRadius:Math.min(e.imageHeight,e.imageWidth)/2+"px",fontSize:Math.min(e.imageHeight,e.imageWidth)/2+"px"},className:g.rankContainer,children:o.jsx("span",{className:g.rankValue,style:{color:n.palette.primary.main},children:s.value})})}),!e.hideText&&o.jsx(f,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:(r=e.option.content)==null?void 0:r.label})]},e.option.code)}export{V as default};
