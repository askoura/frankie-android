{"version":3,"file":"ImageScq-legacy-V5RacVyv.js","sources":["../../src/components/Questions/ImageScq/ImageScq.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport styles from \"./ImageScq.module.css\";\nimport { valueChange } from \"~/state/runState\";\nimport { useTheme } from \"@emotion/react\";\nimport { Box, Card, Grid, Radio } from \"@mui/material\";\nimport { buildResourceUrl } from \"~/networking/common\";\nimport { rtlLanguage } from \"~/utils/common\";\n\nfunction ImageScq(props) {\n  const theme = useTheme();\n  const state = useSelector((state) => {\n    let questionState = state.runState.values[props.component.qualifiedCode];\n    let show_errors = state.runState.values.Survey.show_errors;\n    let isDirty = state.templateState[props.component.qualifiedCode];\n    return {\n      value: questionState?.value || \"\",\n      showValidation:\n        (show_errors || isDirty) && questionState?.validity === false,\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const handleChange = (componentCode, value) => {\n    dispatch(valueChange({ componentCode, value }));\n  };\n\n  const lang = useSelector((state) => {\n    return state.runState.values[\"Survey\"].lang;\n  });\n  const isRtl = rtlLanguage.includes(lang);\n\n  return (\n    <Grid\n      container\n      spacing={props.component.spacing}\n      className={styles.imageGrid}\n    >\n      {props.component.answers.map((option) => {\n        const backgroundImage = option.resources?.image\n          ? `url('${buildResourceUrl(option.resources?.image)}')`\n          : \"0\";\n\n        return (\n          <Grid key={option.code} item xs={12 / props.component.columns}>\n            <Card\n              className={styles.imageContainer}\n              onClick={() =>\n                handleChange(props.component.qualifiedCode, option.code)\n              }\n              style={{\n                paddingTop: 100 / props.component.imageAspectRatio + \"%\",\n                backgroundImage: backgroundImage,\n                backgroundColor: theme.palette.background.default,\n                border: state.value === option.code\n                  ? `2px solid ${theme.palette.primary.main}`\n                  : \"2px solid transparent\",\n              }}\n            >\n              <div className={styles.selection}>\n                <Radio\n                  checked={state.value === option.code}\n                  onChange={(event) =>\n                    handleChange(event.target.name, event.target.value)\n                  }\n                  value={option.code}\n                  name={props.component.qualifiedCode}\n                />\n              </div>\n            </Card>\n            {!props.component.hideText && (\n              <Box\n                sx={{\n                  fontFamily: theme.textStyles.text.font,\n                  color: theme.textStyles.text.color,\n                  fontSize: theme.textStyles.text.size,\n                }}\n              >\n                {option.content?.label}\n              </Box>\n            )}\n          </Grid>\n        );\n      })}\n    </Grid>\n  );\n}\n\nexport default ImageScq;\n"],"names":["ImageScq","props","theme","useTheme","state","useSelector","questionState","runState","values","component","qualifiedCode","show_errors","Survey","isDirty","templateState","value","showValidation","validity","shallowEqual","dispatch","useDispatch","handleChange","componentCode","valueChange","lang","jsx","Grid","container","spacing","className","styles","imageGrid","children","answers","map","option","_option$resources","_option$resources2","_option$content","backgroundImage","resources","image","buildResourceUrl","jsxs","item","xs","columns","Card","imageContainer","onClick","code","style","paddingTop","imageAspectRatio","backgroundColor","palette","background","default","border","primary","main","selection","Radio","checked","onChange","event","target","name","hideText","Box","sx","fontFamily","textStyles","text","font","color","fontSize","size","content","label"],"mappings":"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"}