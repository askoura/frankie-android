{"version":3,"file":"index-c80a9e54.js","sources":["../../src/pages/manage/ConfirmSignup/index.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { Box, Card } from \"@mui/material\";\nimport AuthService from \"~/services/AuthService\";\nimport styles from \"./ConfirmSignup.module.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { PROCESSED_ERRORS, onApiError } from \"~/utils/errorsProcessor\";\nimport { onError, setLoading } from '~/state/edit/editState';\nimport { useDispatch } from 'react-redux';\n\nfunction ConfirmSignup() {\n  const { t } = useTranslation(\"manage\");\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { token } = useParams();\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(false);\n\n  const redirecOnSuccess = (data) => {\n    navigate(\"/\");\n  };\n\n  useEffect(() => {\n    confirmSignup();\n  }, []);\n\n  const confirmSignup = () => {\n    dispatch(setLoading(true));\n    AuthService.confirmSignup(token)\n      .then((data) => {\n        setSuccess(true);\n        setTimeout(() => {\n          redirecOnSuccess(data);\n        }, 10000);\n      })\n      .catch((e) => {\n        onApiError({\n          error: e,\n          globalErrorHandler: (processedError) => {\n            dispatch(onError(processedError));\n          },\n          locallErrorHandler: (processedError) => {\n            if (\n              processedError.name == PROCESSED_ERRORS.USED_CONFIRMATION_TOKEN.name\n              || processedError.name == PROCESSED_ERRORS.EXPIRED_CONFIRMATION_TOKEN.name\n            ) {\n              setError(processed);\n            }\n          },\n        });\n      })\n      .finally(() => {\n        dispatch(setLoading(false));\n      });\n  };\n  return (\n    <Card className={styles.card}>\n      {success && t(\"confirm_signup.success\")}\n      {error && (\n        <Box className={styles.errorText}>\n          {t(`processed_errors.${error}`)}\n        </Box>\n      )}\n    </Card>\n  );\n}\n\nexport default ConfirmSignup;\n"],"names":["useState","useEffect","jsxs","jsx"],"mappings":";;;;;;;AAUA,SAAS,gBAAgB;AACvB,QAAM,EAAE,EAAA,IAAM,eAAe,QAAQ;AACrC,QAAM,WAAW;AACjB,QAAM,WAAW;AACX,QAAA,EAAE,UAAU;AAClB,QAAM,CAAC,OAAO,QAAQ,IAAIA,sBAAS,EAAE;AACrC,QAAM,CAAC,SAAS,UAAU,IAAIA,sBAAS,KAAK;AAEtC,QAAA,mBAAmB,CAAC,SAAS;AACjC,aAAS,GAAG;AAAA,EAAA;AAGdC,eAAAA,UAAU,MAAM;AACA;EAChB,GAAG,CAAE,CAAA;AAEL,QAAM,gBAAgB,MAAM;AACjB,aAAA,WAAW,IAAI,CAAC;AACzB,gBAAY,cAAc,KAAK,EAC5B,KAAK,CAAC,SAAS;AACd,iBAAW,IAAI;AACf,iBAAW,MAAM;AACf,yBAAqB;AAAA,SACpB,GAAK;AAAA,IAAA,CACT,EACA,MAAM,CAAC,MAAM;AACD,iBAAA;AAAA,QACT,OAAO;AAAA,QACP,oBAAoB,CAAC,mBAAmB;AAC7B,mBAAA,QAAQ,cAAc,CAAC;AAAA,QAClC;AAAA,QACA,oBAAoB,CAAC,mBAAmB;AAEpC,cAAA,eAAe,QAAQ,iBAAiB,wBAAwB,QAC7D,eAAe,QAAQ,iBAAiB,2BAA2B,MACtE;AACA,qBAAS,SAAS;AAAA,UACpB;AAAA,QACF;AAAA,MAAA,CACD;AAAA,IAAA,CACF,EACA,QAAQ,MAAM;AACJ,eAAA,WAAW,KAAK,CAAC;AAAA,IAAA,CAC3B;AAAA,EAAA;AAEL,SACGC,kCAAAA,KAAA,MAAA,EAAK,WAAW,OAAO,MACrB,UAAA;AAAA,IAAA,WAAW,EAAE,wBAAwB;AAAA,IACrC,SACEC,kCAAAA,IAAA,KAAA,EAAI,WAAW,OAAO,WACpB,UAAE,EAAA,oBAAoB,KAAK,EAAE,EAChC,CAAA;AAAA,EAEJ,EAAA,CAAA;AAEJ;"}