{"version":3,"file":"index-d39fe3cb.js","sources":["../../src/pages/manage/Signup/index.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport {\n  Button,\n  FormControl,\n  IconButton,\n  Input,\n  InputAdornment,\n  InputLabel,\n  TextField,\n  Box,\n  Typography,\n  FormHelperText,\n  FormGroup,\n} from \"@mui/material\";\nimport { Visibility, VisibilityOff } from \"@mui/icons-material\";\nimport AuthService from \"~/services/AuthService\";\nimport styles from \"./Signup.module.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { AuthWrap } from \"~/components/manage/AuthWrap\";\nimport { processError } from \"~/utils/errorsProcessor\";\nimport { PROCESSED_ERRORS } from \"~/utils/errorsProcessor\";\n\nfunction SignUp() {\n  const { t } = useTranslation(\"manage\");\n  const [loading, setLoading] = useState(false);\n  const [isSuccess, setSuccess] = useState(false);\n  const [processedError, setProcessedError] = useState(\"\");\n  const [showError, setShowError] = useState(false);\n\n  const [email, setEmail] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n\n  const [firstName, setFirstName] = useState(\"\");\n  const [firstNameError, setFirstNameError] = useState(\"\");\n\n  const [lastName, setLastName] = useState(\"\");\n  const [lastNameError, setLastNameError] = useState(\"\");\n\n  const [password, setPassword] = useState(\"\");\n  const [passError, setPassError] = useState(\"\");\n\n  const [domain, setDomain] = useState(\"\");\n  const [domainError, setDomainError] = useState(\"\");\n\n  const [showPassword, setShowPassword] = useState(false);\n  const handleClickShowPassword = () => setShowPassword((show) => !show);\n\n  const onPasswordChanged = (e) => {\n    setPassword(e.target.value);\n    setPassError(\"\");\n  };\n\n  const onEmailChanged = (e) => {\n    setEmail(e.target.value);\n    setEmailError(\"\");\n  };\n\n  const onFirstNameChanged = (e) => {\n    setFirstName(e.target.value);\n    setFirstNameError(\"\");\n  };\n\n  const onLastChanged = (e) => {\n    setLastName(e.target.value);\n    setLastNameError(\"\");\n  };\n  const onDomainChanged = (e) => {\n    setDomain(e.target.value);\n    setDomainError(\"\");\n  };\n\n  const validate = () => {\n    setEmailError(\"\");\n    setPassError(\"\");\n    setDomainError(\"\");\n    setFirstNameError(\"\");\n    setLastNameError(\"\");\n    if (firstName.length == 0) {\n      setFirstNameError(t(\"firstname_required\"));\n      return false;\n    }\n    if (lastName.length == 0) {\n      setLastNameError(t(\"lastname_required\"));\n      return false;\n    }\n    if (email.length == 0) {\n      setEmailError(t(\"email_required\"));\n      return false;\n    }\n    if (password.length == 0) {\n      setPassError(t(\"password_required\"));\n      return false;\n    }\n    if (domain.length == 0) {\n      setDomainError(t(\"domain_required\"));\n      return false;\n    }\n    return true;\n  };\n\n  const onSubmit = () => {\n    if (!validate()) {\n      return;\n    }\n    setLoading(true);\n    AuthService.signup({ email, password, domain, firstName, lastName })\n      .then(() => {\n        setSuccess(true);\n      })\n      .catch((e) => {\n        const processed = processError(e);\n        switch (processed) {\n          case PROCESSED_ERRORS.NETWORK_ERR:\n          case PROCESSED_ERRORS.BACKEND_DOWN:\n            setShowError(true);\n            setProcessedError(processed);\n            break;\n          case PROCESSED_ERRORS.DUPLICATE_EMAIL:\n          case PROCESSED_ERRORS.DUPLICATE_DOMAIN:\n            setProcessedError(processed);\n            break;\n          default:\n            break;\n        }\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  return (\n    <AuthWrap\n      loading={loading}\n      showError={showError}\n      processedError={processedError}\n      handleClose={() => setShowError(false)}\n    >\n      <Box className={styles.wrapper}>\n        <Box className={styles.content}>\n          <Typography variant=\"h4\">{t(\"sign_up.title\")}</Typography>\n          {isSuccess ? (\n            <Box className={styles.successText}>{t(\"sign_up.success\")}</Box>\n          ) : (\n            <Box className={styles.form}>\n              <FormGroup className={styles.formGroup}>\n                <TextField\n                  error={firstNameError.length > 0}\n                  required={true}\n                  value={firstName}\n                  id=\"firstName\"\n                  label={t(\"label.first_name\")}\n                  name=\"firstName\"\n                  onChange={onFirstNameChanged}\n                  variant=\"standard\"\n                />\n                <TextField\n                  error={lastNameError?.length > 0}\n                  id=\"lastName\"\n                  value={lastName}\n                  required={true}\n                  onChange={onLastChanged}\n                  label={t(\"label.last_name\")}\n                  name=\"lastName\"\n                  variant=\"standard\"\n                />\n                <TextField\n                  required={true}\n                  value={email}\n                  error={\n                    emailError?.length > 0 ||\n                    processedError == PROCESSED_ERRORS.DUPLICATE_EMAIL\n                  }\n                  id=\"email\"\n                  onChange={onEmailChanged}\n                  label={t(\"label.email\")}\n                  name=\"email\"\n                  variant=\"standard\"\n                />\n\n                <FormControl required={true} variant=\"standard\">\n                  <InputLabel htmlFor=\"standard-adornment-password\">\n                    {t(\"label.password\")}\n                  </InputLabel>\n                  <Input\n                    error={passError?.length > 0}\n                    required={true}\n                    value={password}\n                    onChange={onPasswordChanged}\n                    name=\"password\"\n                    id=\"standard-adornment-password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    endAdornment={\n                      <InputAdornment position=\"end\">\n                        <IconButton\n                          aria-label=\"toggle password visibility\"\n                          onClick={handleClickShowPassword}\n                        >\n                          {showPassword ? <VisibilityOff /> : <Visibility />}\n                        </IconButton>\n                      </InputAdornment>\n                    }\n                  />\n                </FormControl>\n                <TextField\n                  error={\n                    domainError?.length > 0 ||\n                    processedError == PROCESSED_ERRORS.DUPLICATE_DOMAIN\n                  }\n                  id=\"domain\"\n                  value={domain}\n                  onChange={onDomainChanged}\n                  required={true}\n                  label={t(\"label.server_name\")}\n                  name=\"domain\"\n                  variant=\"standard\"\n                />\n                {(processedError == PROCESSED_ERRORS.DUPLICATE_DOMAIN ||\n                  processedError == PROCESSED_ERRORS.INVALID_DOMAIN ||\n                  processedError == PROCESSED_ERRORS.DUPLICATE_EMAIL) && (\n                  <FormHelperText className={styles.errorText}>\n                    {t(`processed_errors.${processedError}`)}\n                  </FormHelperText>\n                )}\n                {(firstNameError ||\n                  lastNameError ||\n                  emailError ||\n                  passError ||\n                  domainError) && (\n                  <FormHelperText className={styles.errorText}>\n                    {firstNameError ||\n                      lastNameError ||\n                      emailError ||\n                      passError ||\n                      domainError}\n                  </FormHelperText>\n                )}\n                <FormHelperText sx={{ fontSize: \"10px\" }}>\n                  {t(\"sign_up.helper_text\")}\n                </FormHelperText>\n              </FormGroup>\n              <Button onClick={onSubmit} sx={{ mt: \"40px\" }}>\n                {t(\"sign_up.sign_up\")}\n              </Button>\n            </Box>\n          )}\n        </Box>\n      </Box>\n    </AuthWrap>\n  );\n}\n\nexport default SignUp;\n"],"names":["useState","jsx","jsxs"],"mappings":"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"}