{"version":3,"file":"ImageMcq-B0AORBvE.js","sources":["../../src/components/Questions/ImageMcq/ImageMcq.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport { valueChange } from \"~/state/runState\";\nimport { useTheme } from \"@emotion/react\";\nimport { Box, Card, Checkbox, Grid } from \"@mui/material\";\nimport { buildResourceUrl } from \"~/networking/common\";\nimport styles from \"./ImageMcq.module.css\";\nimport { setDirty } from \"~/state/templateState\";\nimport { rtlLanguage } from \"~/utils/common\";\n\nfunction ImageMcq(props) {\n  const lang = useSelector((state) => {\n    return state.runState.values[\"Survey\"].lang;\n  });\n  const isRtl = rtlLanguage.includes(lang);\n\n  return (\n    <Grid\n      spacing={props.component.spacing}\n      container\n      className={styles.imageGrid}\n    >\n      {props.component.answers.map((option) => {\n        return (\n          <ImageMcqItem\n            option={option}\n            aspectRatio={props.component.imageAspectRatio}\n            columns={props.component.columns}\n            hideText={props.component.hideText}\n            parentCode={props.component.qualifiedCode}\n            key={option.qualifiedCode}\n          />\n        );\n      })}\n    </Grid>\n  );\n}\n\nfunction ImageMcqItem(props) {\n  const theme = useTheme();\n  const state = useSelector((state) => {\n    let answerState = state.runState.values[props.option.qualifiedCode];\n    return {\n      showAnswer:\n        typeof answerState?.relevance == \"undefined\" || answerState.relevance,\n      checked: answerState?.value || false,\n    };\n  }, shallowEqual);\n\n  const dispatch = useDispatch();\n  const handleChange = (componentCode, value) => {\n    dispatch(valueChange({ componentCode, value }));\n    dispatch(setDirty(componentCode));\n    dispatch(setDirty(props.parentCode));\n  };\n  const backgroundImage = props.option.resources?.image\n    ? `url('${buildResourceUrl(props.option.resources?.image)}')`\n    : \"0\";\n\n  return (\n    <Grid key={props.option.code} item xs={12 / props.columns}>\n      <Card\n        className={styles.imageContainer}\n        onClick={() => handleChange(props.option.qualifiedCode, !state.checked)}\n        style={{\n          paddingTop: 100 / props.aspectRatio + \"%\",\n          backgroundImage: backgroundImage,\n          backgroundColor: theme.palette.background.default,\n          border: state.checked\n            ? `2px solid ${theme.palette.primary.main}`\n            : \"2px solid transparent\",\n        }}\n      >\n        <div className={styles.selection}>\n          <Checkbox\n            onChange={(event) =>\n              handleChange(props.option.qualifiedCode, !state.checked)\n            }\n            checked={state.checked}\n          />\n        </div>\n      </Card>\n      {!props.hideText && (\n        <Box\n          sx={{\n            fontFamily: theme.textStyles.text.font,\n            color: theme.textStyles.text.color,\n            fontSize: theme.textStyles.text.size,\n          }}\n        >\n          {props.option.content?.label}\n        </Box>\n      )}\n    </Grid>\n  );\n}\n\nexport default ImageMcq;\n"],"names":["jsx","state"],"mappings":";;;;;;;;;;;;;;;;;AAUA,SAAS,SAAS,OAAO;AACV,cAAY,CAAC,UAAU;AAClC,WAAO,MAAM,SAAS,OAAO,QAAQ,EAAE;AAAA,EAAA,CACxC;AAIC,SAAAA,kCAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,SAAS,MAAM,UAAU;AAAA,MACzB,WAAS;AAAA,MACT,WAAW,OAAO;AAAA,MAEjB,UAAM,MAAA,UAAU,QAAQ,IAAI,CAAC,WAAW;AAErC,eAAAA,kCAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC;AAAA,YACA,aAAa,MAAM,UAAU;AAAA,YAC7B,SAAS,MAAM,UAAU;AAAA,YACzB,UAAU,MAAM,UAAU;AAAA,YAC1B,YAAY,MAAM,UAAU;AAAA,UAAA;AAAA,UACvB,OAAO;AAAA,QAAA;AAAA,MACd,CAEH;AAAA,IAAA;AAAA,EAAA;AAGP;AAEA,SAAS,aAAa,OAAO;;AAC3B,QAAM,QAAQ;AACR,QAAA,QAAQ,YAAY,CAACC,WAAU;AACnC,QAAI,cAAcA,OAAM,SAAS,OAAO,MAAM,OAAO,aAAa;AAC3D,WAAA;AAAA,MACL,YACE,QAAO,2CAAa,cAAa,eAAe,YAAY;AAAA,MAC9D,UAAS,2CAAa,UAAS;AAAA,IAAA;AAAA,KAEhC,YAAY;AAEf,QAAM,WAAW;AACX,QAAA,eAAe,CAAC,eAAe,UAAU;AAC7C,aAAS,YAAY,EAAE,eAAe,MAAA,CAAO,CAAC;AACrC,aAAA,SAAS,aAAa,CAAC;AACvB,aAAA,SAAS,MAAM,UAAU,CAAC;AAAA,EAAA;AAErC,QAAM,oBAAkB,WAAM,OAAO,cAAb,mBAAwB,SAC5C,QAAQ,yBAAiB,WAAM,OAAO,cAAb,mBAAwB,KAAK,GAAC,QACvD;AAEJ,gDACG,MAA6B,EAAA,MAAI,MAAC,IAAI,KAAK,MAAM,SAChD,UAAA;AAAA,IAAAD,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,WAAW,OAAO;AAAA,QAClB,SAAS,MAAM,aAAa,MAAM,OAAO,eAAe,CAAC,MAAM,OAAO;AAAA,QACtE,OAAO;AAAA,UACL,YAAY,MAAM,MAAM,cAAc;AAAA,UACtC;AAAA,UACA,iBAAiB,MAAM,QAAQ,WAAW;AAAA,UAC1C,QAAQ,MAAM,UACV,aAAa,aAAM,QAAQ,QAAQ,QACnC;AAAA,QACN;AAAA,QAEA,UAACA,kCAAA,IAAA,OAAA,EAAI,WAAW,OAAO,WACrB,UAAAA,kCAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,UAAU,CAAC,UACT,aAAa,MAAM,OAAO,eAAe,CAAC,MAAM,OAAO;AAAA,YAEzD,SAAS,MAAM;AAAA,UAAA;AAAA,QAAA,GAEnB;AAAA,MAAA;AAAA,IACF;AAAA,IACC,CAAC,MAAM,YACNA,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,IAAI;AAAA,UACF,YAAY,MAAM,WAAW,KAAK;AAAA,UAClC,OAAO,MAAM,WAAW,KAAK;AAAA,UAC7B,UAAU,MAAM,WAAW,KAAK;AAAA,QAClC;AAAA,QAEC,WAAA,WAAM,OAAO,YAAb,mBAAsB;AAAA,MAAA;AAAA,IACzB;AAAA,EA/BO,EAAA,GAAA,MAAM,OAAO,IAiCxB;AAEJ;"}