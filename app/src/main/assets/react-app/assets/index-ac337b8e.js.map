{"version":3,"file":"index-ac337b8e.js","sources":["../../src/pages/manage/Signup/index.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport {\n  Button,\n  FormControl,\n  IconButton,\n  Input,\n  InputAdornment,\n  InputLabel,\n  TextField,\n  Box,\n  Typography,\n  FormHelperText,\n  FormGroup,\n} from \"@mui/material\";\nimport { Visibility, VisibilityOff } from \"@mui/icons-material\";\nimport AuthService from \"~/services/AuthService\";\nimport styles from \"./Signup.module.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { PROCESSED_ERRORS, onApiError } from \"~/utils/errorsProcessor\";\nimport { GoogleLogin, GoogleOAuthProvider } from \"@react-oauth/google\";\nimport { useNavigate } from \"react-router-dom\";\nimport { setLoading } from '~/state/edit/editState';\n\nfunction SignUp() {\n  const { t } = useTranslation(\"manage\");\n  const navigate = useNavigate();\n  const [isSuccess, setSuccess] = useState(false);\n\n  const [email, setEmail] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [duplicateEmailError, setDuplicateEmailError] = useState(\"\");\n\n  const [firstName, setFirstName] = useState(\"\");\n  const [firstNameError, setFirstNameError] = useState(\"\");\n\n  const [lastName, setLastName] = useState(\"\");\n  const [lastNameError, setLastNameError] = useState(\"\");\n\n  const [password, setPassword] = useState(\"\");\n  const [passError, setPassError] = useState(\"\");\n\n  const [showPassword, setShowPassword] = useState(false);\n  const handleClickShowPassword = () => setShowPassword((show) => !show);\n\n  const onPasswordChanged = (e) => {\n    setPassword(e.target.value);\n    setPassError(\"\");\n  };\n\n  const onEmailChanged = (e) => {\n    setEmail(e.target.value);\n    setEmailError(\"\");\n  };\n\n  const onFirstNameChanged = (e) => {\n    setFirstName(e.target.value);\n    setFirstNameError(\"\");\n  };\n\n  const onLastChanged = (e) => {\n    setLastName(e.target.value);\n    setLastNameError(\"\");\n  };\n\n  const validate = () => {\n    setEmailError(\"\");\n    setPassError(\"\");\n    setFirstNameError(\"\");\n    setLastNameError(\"\");\n    if (firstName.length == 0) {\n      setFirstNameError(t(\"firstname_required\"));\n      return false;\n    }\n    if (lastName.length == 0) {\n      setLastNameError(t(\"lastname_required\"));\n      return false;\n    }\n    if (email.length == 0) {\n      setEmailError(t(\"email_required\"));\n      return false;\n    }\n    if (password.length == 0) {\n      setPassError(t(\"password_required\"));\n      return false;\n    }\n    return true;\n  };\n\n  const onGoogleAuthSuccess = (credentialResponse) => {\n    dispatch(setLoading(true));\n    AuthService.googleSignIn(credentialResponse)\n      .then((data) => {\n        const { from } = location.state || { from: { pathname: \"/\" } };\n        navigate(from);\n      })\n      .catch((e) => {\n        onError(e);\n      })\n      .finally(() => {\n        dispatch(setLoading(false));\n      });\n  };\n\n  const onSubmit = () => {\n    if (!validate()) {\n      return;\n    }\n    dispatch(setLoading(true));\n    AuthService.signup({ email, password, firstName, lastName })\n      .then(() => {\n        setSuccess(true);\n      })\n      .catch((e) => {\n        onApiError({\n          error: e,\n          globalErrorHandler: (processedError) => {\n            dispatch(onError(processedError));\n          },\n          locallErrorHandler: (processedError) => {\n            if (processedError.name == PROCESSED_ERRORS.DUPLICATE_EMAIL.name) {\n              setDuplicateEmailError(t(`processed_errors.${processedError.name}`));\n            }\n          },\n        });\n      })\n      .finally(() => {\n        dispatch(setLoading(false));\n      });\n  };\n\n  return (\n    <Box className={styles.wrapper}>\n      <Box className={styles.content}>\n        <Typography variant=\"h4\">{t(\"sign_up.title\")}</Typography>\n        {isSuccess ? (\n          <Box className={styles.successText}>{t(\"sign_up.success\")}</Box>\n        ) : (\n          <Box className={styles.form}>\n            <FormGroup className={styles.formGroup}>\n              <TextField\n                error={firstNameError.length > 0}\n                required={true}\n                value={firstName}\n                id=\"firstName\"\n                label={t(\"label.first_name\")}\n                name=\"firstName\"\n                onChange={onFirstNameChanged}\n                variant=\"standard\"\n              />\n              <TextField\n                error={lastNameError?.length > 0}\n                id=\"lastName\"\n                value={lastName}\n                required={true}\n                onChange={onLastChanged}\n                label={t(\"label.last_name\")}\n                name=\"lastName\"\n                variant=\"standard\"\n              />\n              <TextField\n                required={true}\n                value={email}\n                error={\n                  emailError?.length > 0 || duplicateEmailError.length > 0\n                }\n                id=\"email\"\n                onChange={onEmailChanged}\n                label={t(\"label.email\")}\n                name=\"email\"\n                variant=\"standard\"\n              />\n\n              <FormControl required={true} variant=\"standard\">\n                <InputLabel htmlFor=\"standard-adornment-password\">\n                  {t(\"label.password\")}\n                </InputLabel>\n                <Input\n                  error={passError?.length > 0}\n                  required={true}\n                  value={password}\n                  onChange={onPasswordChanged}\n                  name=\"password\"\n                  id=\"standard-adornment-password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  endAdornment={\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        aria-label=\"toggle password visibility\"\n                        onClick={handleClickShowPassword}\n                      >\n                        {showPassword ? <VisibilityOff /> : <Visibility />}\n                      </IconButton>\n                    </InputAdornment>\n                  }\n                />\n              </FormControl>\n              {duplicateEmailError && (\n                <FormHelperText className={styles.errorText}>\n                  {t(duplicateEmailError)}\n                </FormHelperText>\n              )}\n              {(firstNameError || lastNameError || emailError || passError) && (\n                <FormHelperText className={styles.errorText}>\n                  {firstNameError || lastNameError || emailError || passError}\n                </FormHelperText>\n              )}\n              <FormHelperText sx={{ fontSize: \"10px\" }}>\n                {t(\"sign_up.helper_text\")}\n              </FormHelperText>\n            </FormGroup>\n            <Button onClick={onSubmit} sx={{ mt: \"40px\" }}>\n              {t(\"sign_up.sign_up\")}\n            </Button>\n          </Box>\n        )}\n\n        <div style={{ width: \"200px\", margin: \"auto\" }}>\n          <GoogleOAuthProvider\n            clientId={import.meta.env.VITE_GOOGLE_AUTH_CLIENT_ID}\n          >\n            <GoogleLogin\n              onSuccess={onGoogleAuthSuccess}\n              onError={() => {\n                console.log(\"Login Failed\");\n              }}\n            />\n          </GoogleOAuthProvider>\n        </div>\n      </Box>\n    </Box>\n  );\n}\n\nexport default SignUp;\n"],"names":["useState","jsx","jsxs"],"mappings":"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"}