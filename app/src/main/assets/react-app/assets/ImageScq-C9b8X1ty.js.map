{"version":3,"file":"ImageScq-C9b8X1ty.js","sources":["../../src/components/Questions/ImageScq/ImageScq.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport styles from \"./ImageScq.module.css\";\nimport { valueChange } from \"~/state/runState\";\nimport { useTheme } from \"@emotion/react\";\nimport { Box, Card, Grid, Radio } from \"@mui/material\";\nimport { buildResourceUrl } from \"~/networking/common\";\nimport { rtlLanguage } from \"~/utils/common\";\n\nfunction ImageScq(props) {\n  const theme = useTheme();\n  const state = useSelector((state) => {\n    let questionState = state.runState.values[props.component.qualifiedCode];\n    let show_errors = state.runState.values.Survey.show_errors;\n    let isDirty = state.templateState[props.component.qualifiedCode];\n    return {\n      value: questionState?.value || \"\",\n      showValidation:\n        (show_errors || isDirty) && questionState?.validity === false,\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const handleChange = (componentCode, value) => {\n    dispatch(valueChange({ componentCode, value }));\n  };\n\n  const lang = useSelector((state) => {\n    return state.runState.values[\"Survey\"].lang;\n  });\n  const isRtl = rtlLanguage.includes(lang);\n\n  return (\n    <Grid\n      container\n      spacing={props.component.spacing}\n      className={styles.imageGrid}\n    >\n      {props.component.answers.map((option) => {\n        const backgroundImage = option.resources?.image\n          ? `url('${buildResourceUrl(option.resources?.image)}')`\n          : \"0\";\n\n        return (\n          <Grid key={option.code} item xs={12 / props.component.columns}>\n            <Card\n              className={styles.imageContainer}\n              onClick={() =>\n                handleChange(props.component.qualifiedCode, option.code)\n              }\n              style={{\n                paddingTop: 100 / props.component.imageAspectRatio + \"%\",\n                backgroundImage: backgroundImage,\n                backgroundColor: theme.palette.background.default,\n                border: state.value === option.code\n                  ? `2px solid ${theme.palette.primary.main}`\n                  : \"2px solid transparent\",\n              }}\n            >\n              <div className={styles.selection}>\n                <Radio\n                  checked={state.value === option.code}\n                  onChange={(event) =>\n                    handleChange(event.target.name, event.target.value)\n                  }\n                  value={option.code}\n                  name={props.component.qualifiedCode}\n                />\n              </div>\n            </Card>\n            {!props.component.hideText && (\n              <Box\n                sx={{\n                  fontFamily: theme.textStyles.text.font,\n                  color: theme.textStyles.text.color,\n                  fontSize: theme.textStyles.text.size,\n                }}\n              >\n                {option.content?.label}\n              </Box>\n            )}\n          </Grid>\n        );\n      })}\n    </Grid>\n  );\n}\n\nexport default ImageScq;\n"],"names":["state","jsx","jsxs"],"mappings":";;;;;;;;;;;;;;;;;;;AASA,SAAS,SAAS,OAAO;AACvB,QAAM,QAAQ;AACR,QAAA,QAAQ,YAAY,CAACA,WAAU;AACnC,QAAI,gBAAgBA,OAAM,SAAS,OAAO,MAAM,UAAU,aAAa;AACvE,QAAI,cAAcA,OAAM,SAAS,OAAO,OAAO;AAC/C,QAAI,UAAUA,OAAM,cAAc,MAAM,UAAU,aAAa;AACxD,WAAA;AAAA,MACL,QAAO,+CAAe,UAAS;AAAA,MAC/B,iBACG,eAAe,aAAY,+CAAe,cAAa;AAAA,IAAA;AAAA,KAE3D,YAAY;AACf,QAAM,WAAW;AAEX,QAAA,eAAe,CAAC,eAAe,UAAU;AAC7C,aAAS,YAAY,EAAE,eAAe,MAAA,CAAO,CAAC;AAAA,EAAA;AAGnC,cAAY,CAACA,WAAU;AAClC,WAAOA,OAAM,SAAS,OAAO,QAAQ,EAAE;AAAA,EAAA,CACxC;AAIC,SAAAC,kCAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAS;AAAA,MACT,SAAS,MAAM,UAAU;AAAA,MACzB,WAAW,OAAO;AAAA,MAEjB,UAAM,MAAA,UAAU,QAAQ,IAAI,CAAC,WAAW;;AACjC,cAAA,oBAAkB,YAAO,cAAP,mBAAkB,SACtC,QAAQ,yBAAiB,YAAO,cAAP,mBAAkB,KAAK,GAAC,QACjD;AAGF,eAAAC,uCAAC,QAAuB,MAAI,MAAC,IAAI,KAAK,MAAM,UAAU,SACpD,UAAA;AAAA,UAAAD,kCAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAW,OAAO;AAAA,cAClB,SAAS,MACP,aAAa,MAAM,UAAU,eAAe,OAAO,IAAI;AAAA,cAEzD,OAAO;AAAA,gBACL,YAAY,MAAM,MAAM,UAAU,mBAAmB;AAAA,gBACrD;AAAA,gBACA,iBAAiB,MAAM,QAAQ,WAAW;AAAA,gBAC1C,QAAQ,MAAM,UAAU,OAAO,OAC3B,aAAa,aAAM,QAAQ,QAAQ,QACnC;AAAA,cACN;AAAA,cAEA,UAACA,kCAAA,IAAA,OAAA,EAAI,WAAW,OAAO,WACrB,UAAAA,kCAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,SAAS,MAAM,UAAU,OAAO;AAAA,kBAChC,UAAU,CAAC,UACT,aAAa,MAAM,OAAO,MAAM,MAAM,OAAO,KAAK;AAAA,kBAEpD,OAAO,OAAO;AAAA,kBACd,MAAM,MAAM,UAAU;AAAA,gBAAA;AAAA,cAAA,GAE1B;AAAA,YAAA;AAAA,UACF;AAAA,UACC,CAAC,MAAM,UAAU,YAChBA,kCAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,IAAI;AAAA,gBACF,YAAY,MAAM,WAAW,KAAK;AAAA,gBAClC,OAAO,MAAM,WAAW,KAAK;AAAA,gBAC7B,UAAU,MAAM,WAAW,KAAK;AAAA,cAClC;AAAA,cAEC,uBAAO,+BAAS;AAAA,YAAA;AAAA,UACnB;AAAA,QAAA,KAnCO,OAAO,IAqClB;AAAA,MAAA,CAEH;AAAA,IAAA;AAAA,EAAA;AAGP;"}