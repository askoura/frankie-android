"use strict";(self.webpackChunkfrankie_react=self.webpackChunkfrankie_react||[]).push([[597],{64617:function(e,n,t){t.d(n,{Z:function(){return c}});t(72791);var o=t(95048),a=t(25248),i="Layout_main__FV28D",r=t(50228),l=t(80184);function c(e){var n=(0,o.v9)((function(e){return e.template.isLoading}));return(0,l.jsxs)(r.Z,{className:i,sx:{backgroundColor:"background.default",color:"text.primary"},children:[n?(0,l.jsx)(a.Z,{}):null,e.children]})}},84402:function(e,n,t){t.r(n),t.d(n,{default:function(){return gn}});var o=t(1413),a=t(29439),i=t(72791),r=t(95048),l="RunSurvey_mainContainer__7X1z1",c=t(33168),u=t(21703),d=t(57012),s=t(93740),v=t(8197),m=t(29886),p=t(24086),f=t(64617),x=t(11647),g=t(8771),h=t(15614),y="ErrorMessage_errorContent__wbGeh",C=t(80184);function S(e){var n=(0,i.useState)(!0),t=(0,a.Z)(n,2),o=t[0],r=t[1],l=(0,i.useState)("ltr"),u=(0,a.Z)(l,2),d=u[0],s=u[1],v=function(){r(!1)},m=(0,c.$)("common").i18n;return(0,i.useEffect)((function(){h.Bc.includes(m.language)?s("rtl"):s("ltr")}),[m.language]),"toast"===e.variant?(0,C.jsx)(x.Z,{open:o,autoHideDuration:6e3,onClose:v,children:(0,C.jsx)(g.Z,{variant:"standard",severity:e.severity||"error",onClose:v,dir:d,children:e.error.message})}):(0,C.jsx)("div",{className:"error-page ".concat(e.className||""),children:(0,C.jsx)("div",{className:y,children:(0,C.jsx)(g.Z,{severity:e.severity||"error",variant:"standard",dir:d,children:e.error.message})})})}var _={},j=t(74142),w=t(50228),q=t(30199),Z=t(36308),I=t(93835),b=t(44059);var T=function(e){var n=(0,r.v9)((function(e){return{navigate:e.runState.navigate,lang:e.runState.lang}}),r.wU),t=(0,r.I0)();return(0,i.useEffect)((function(){"undefined"!==typeof n.navigate&&e.navigate(n.navigate)})),(0,C.jsxs)(Z.Z,{sx:{backgroundColor:"background.paper",color:"primary.main"},id:"ChangeLang",value:e.lang.code,onChange:function(e){t((0,b.TL)({lang:e.target.value}))},children:[(0,C.jsx)(I.Z,{value:e.lang.code,children:e.lang.langName}),e.additionalLang?e.additionalLang.map((function(e,n){return(0,C.jsx)(I.Z,{value:e.code,children:e.langName},n)})):""]})},k=t(45254),D=t(83492),N=t(43432),z=t(62033);var F=function(e){var n=(0,j.Z)(),t=((0,r.v9)((function(n){var t,o=n.runState[null===(t=e.Choice)||void 0===t?void 0:t.code];return{showChoice:"undefined"===typeof(null===o||void 0===o?void 0:o.relevance)||(null===o||void 0===o?void 0:o.relevance)}}),r.wU),function(){return(0,C.jsx)(N.Z,{control:(0,C.jsx)(z.Z,{}),label:(0,C.jsx)(w.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.Choice.content.label}),value:e.Choice.code},e.Choice.qualifiedCode)});return t?t():""},U=t(85148),E="ValidationItem_wrapper__gV9Wb",L=t(88551);var R=function(e){var n=(0,c.$)("common").t;return function(){var t="";if(e.validation.content&&e.validation.isCustomErrorActive)t=e.validation.content;else{var a=e.name.replace(/[0-9]/g,"");t=n(a,(0,o.Z)({},e.validation))}return t?(0,C.jsxs)(w.Z,{sx:{color:"error.main"},className:E,children:[(0,C.jsx)(L.Z,{}),t]}):""}()};var A=function(e){var n=(0,r.v9)((function(n){if(e.component.validation){var t={};return Object.keys(e.component.validation).forEach((function(o){var a=n.runState[e.component.qualifiedCode][o];a&&(t[o]=a)})),t}return{}}));return function(){if(e.component.validation){var t=Object.keys(e.component.validation).filter((function(e){return n[e]})),o=e.limit?e.limit:t.length;return t.slice(0,o).map((function(n,t){return(0,C.jsx)(R,{name:n,validation:e.component.validation[n]},t)}))}return""}()};var P=function(e){var n=(0,j.Z)(),t=e.Choice.answers[0],o=(0,r.v9)((function(n){var o=n.runState[e.Choice.qualifiedCode],a=n.runState[t.qualifiedCode],i=n.runState.Survey.show_errors,r=n.template[t.qualifiedCode];return{showChoice:"undefined"===typeof(null===o||void 0===o?void 0:o.relevance)||o.relevance,childInvalid:(i||r)&&!0===(null===a||void 0===a?void 0:a.relevance)&&!1===(null===a||void 0===a?void 0:a.validity),value:(null===a||void 0===a?void 0:a.value)||""}}),r.wU),a=(0,r.I0)(),l=function(e){a((0,b.T7)({componentCode:e.target.name,value:e.target.value}))},c=function(n){a((0,b.T7)({componentCode:e.parentCode,value:e.Choice.code}))},u=function(e){a({type:"SET_DIRTY",componentCode:e.target.name})},d=(0,i.useRef)(),s=function(e){e.target.checked&&d.current.focus()};return o.showChoice?function(){var a,i;return(0,C.jsxs)("div",{className:"text-left d-flex",children:[(0,C.jsx)(N.Z,{control:(0,C.jsx)(z.Z,{}),label:(0,C.jsx)("div",{className:"w-100",children:(0,C.jsx)(U.Z,{variant:"standard",required:(null===(a=o.textChild)||void 0===a?void 0:a.relevance)&&(null===(i=t.validation)||void 0===i?void 0:i.required),inputRef:d,id:t.qualifiedCode,name:t.qualifiedCode,label:e.Choice.content.label,onChange:l,onFocus:c,onBlur:u,value:o.value,InputProps:{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size}},helperText:o.childInvalid?(0,C.jsx)(A,{component:t,limit:1}):""})}),onChange:s,value:e.Choice.code},e.Choice.qualifiedCode),(0,C.jsx)("p",{})]})}():""};var Q=function(e){var n=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode];return{value:(null===t||void 0===t?void 0:t.value)||"",showValidation:(o||a)&&!1===(null===t||void 0===t?void 0:t.validity)}}),r.wU),t=(0,r.I0)();return(0,C.jsxs)(k.Z,{component:"fieldset",children:[(0,C.jsx)(D.Z,{name:e.component.qualifiedCode,value:n.value,onChange:function(e){t((0,b.T7)({componentCode:e.target.name,value:e.target.value}))},children:e.component.answers.map((function(n){return"other"===n.type?(0,C.jsx)(P,{parentCode:e.component.qualifiedCode,Choice:n},n.qualifiedCode):(0,C.jsx)(F,{Choice:n},n.qualifiedCode)}))}),n.showValidation&&e.isSubQuestion?(0,C.jsxs)("div",{className:"MuiFormHelperText-root",children:[(0,C.jsx)(A,{component:e.component,limit:1})," "]}):""]})},M="TextQuestion_questionItem__ormJL";var H=function(e){var n,t,o=(0,j.Z)(),a=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode],i=null===t||void 0===t?void 0:t.validity,r=(o||a)&&!1===i;return{value:(null===t||void 0===t?void 0:t.value)||"",invalid:r}}),r.wU),i=(0,r.I0)();return(0,C.jsx)("div",{className:M,children:(0,C.jsx)(U.Z,{variant:"standard",required:!(null===(n=e.component.validation)||void 0===n||null===(t=n.validation_required)||void 0===t||!t.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,label:e.isSubQuestion?e.component.content.label:e.component.content.hint||"",onChange:function(e){i((0,b.T7)({componentCode:e.target.name,value:e.target.value}))},onBlur:function(e){i({type:"SET_DIRTY",componentCode:e.target.name})},inputProps:{maxLength:e.component.maxChars||void 0},value:a.value,error:a.invalid,InputProps:{sx:{fontFamily:o.textStyles.text.font,color:o.textStyles.text.color,fontSize:o.textStyles.text.size}},helperText:e.isSubQuestion&&a.invalid?(0,C.jsx)(A,{component:e.component,limit:1}):""})})},Y="EmailQuestion_questionItem__3p9Xg";var G=function(e){var n,t,o=(0,j.Z)(),a=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode],i=null===t||void 0===t?void 0:t.validity,r=(o||a)&&!1===i;return{value:(null===t||void 0===t?void 0:t.value)||"",invalid:r}}),r.wU),i=(0,r.I0)();return(0,C.jsx)("div",{className:Y,children:(0,C.jsx)(U.Z,{variant:"standard",required:!(null===(n=e.component.validation)||void 0===n||null===(t=n.validation_required)||void 0===t||!t.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,label:e.isSubQuestion?e.component.content.label:e.component.content.hint||"",onChange:function(e){i((0,b.T7)({componentCode:e.target.name,value:e.target.value}))},onBlur:function(e){i({type:"SET_DIRTY",componentCode:e.target.name})},inputProps:{type:"email",maxLength:e.component.maxChars||void 0},value:a.value,error:a.invalid,InputProps:{sx:{fontFamily:o.textStyles.text.font,color:o.textStyles.text.color,fontSize:o.textStyles.text.size}},helperText:e.isSubQuestion&&a.invalid?(0,C.jsx)(A,{component:e.component,limit:1}):""})})},B="NumberQuestion_questionItem__XR4g8";var V=function(e){var n,t,o=(0,j.Z)(),a=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode],i=null===t||void 0===t?void 0:t.validity,r=(o||a)&&!1===i;return{value:void 0===(null===t||void 0===t?void 0:t.value)?"":null===t||void 0===t?void 0:t.value,invalid:r}}),r.wU),i=(0,r.I0)();return(0,C.jsx)("div",{className:B,children:(0,C.jsx)(U.Z,{variant:"standard",required:!(null===(n=e.component.validation)||void 0===n||null===(t=n.validation_required)||void 0===t||!t.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,label:e.isSubQuestion?e.component.content.label:e.component.content.hint||"",onChange:function(n){var t=e.component.allowDecimal?/^[0-9]*[.]*[0-9]*$/:/^[0-9]*$/;if(""===n.target.value||t.test(n.target.value)){var o=+n.target.value;i((0,b.T7)({componentCode:n.target.name,value:""===n.target.value||isNaN(o)||n.target.value.endsWith(".")||/^[0][.][0]+$/.test(n.target.value)?n.target.value:o}))}},onBlur:function(e){i({type:"SET_DIRTY",componentCode:e.target.name})},inputProps:{maxLength:e.component.maxChars||void 0},value:a.value,error:a.invalid,InputProps:{sx:{fontFamily:o.textStyles.text.font,color:o.textStyles.text.color,fontSize:o.textStyles.text.size}},helperText:e.isSubQuestion&&a.invalid?(0,C.jsx)(A,{component:e.component,limit:1}):""})})},O=t(61094),W=t(52791);var J=function(e){var n=(0,j.Z)(),t=(0,r.v9)((function(n){var t,o=n.runState[null===(t=e.Answer)||void 0===t?void 0:t.qualifiedCode];return{showAnswer:"undefined"==typeof(null===o||void 0===o?void 0:o.relevance)||o.relevance,checked:(null===o||void 0===o?void 0:o.value)||!1}}),r.wU),o=(0,r.I0)();return t.showAnswer?(0,C.jsx)(N.Z,{control:(0,C.jsx)(O.Z,{checked:t.checked,onChange:function(n){o((0,b.T7)({componentCode:n.target.name,value:n.target.checked})),o({type:"SET_DIRTY",componentCode:n.target.name}),o({type:"SET_DIRTY",componentCode:e.parentCode})},name:e.Answer.qualifiedCode}),label:(0,C.jsx)(W.Z,{sx:{fontFamily:n.textStyles.text.font,fontSize:n.textStyles.text.size},children:e.Answer.content.label})}):""};var $=function(e){var n=(0,j.Z)(),t=e.Answer.answers[0],o=(0,r.v9)((function(n){var o,a=n.runState[e.Answer.qualifiedCode],i=n.runState[t.qualifiedCode],r=n.runState.Survey.show_errors,l=n.template[t.qualifiedCode];return{showAnswer:"undefined"===typeof(null===a||void 0===a?void 0:a.relevance)||a.relevance,childInvalid:(r||l)&&!0===(null===i||void 0===i?void 0:i.relevance)&&!1===(null===i||void 0===i?void 0:i.validity),checked:(null===a||void 0===a?void 0:a.value)||!1,textValue:(null===i||void 0===i?void 0:i.value)||"",textRelevance:null===(o=n.textChild)||void 0===o?void 0:o.relevance}}),r.wU),a=(0,r.I0)(),l=function(n){a((0,b.T7)({componentCode:n.target.name,value:n.target.checked})),a({type:"SET_DIRTY",componentCode:n.target.name}),a({type:"SET_DIRTY",componentCode:e.parentCode}),n.target.checked&&u.current.focus()},c=function(e){a((0,b.T7)({componentCode:e.target.name,value:e.target.value}))},u=(0,i.useRef)(),d=function(n){a((0,b.T7)({componentCode:e.Answer.qualifiedCode,value:!0}))},s=function(e){a({type:"SET_DIRTY",componentCode:e.target.name})};return o.showAnswer?function(){var a;return(0,C.jsx)(N.Z,{control:(0,C.jsx)(O.Z,{checked:o.checked,onChange:l,name:e.Answer.qualifiedCode}),label:(0,C.jsx)("div",{className:"w-100",children:(0,C.jsx)(U.Z,{variant:"standard",required:o.textRelevance&&(null===(a=t.validation)||void 0===a?void 0:a.required),inputRef:u,id:t.qualifiedCode,name:t.qualifiedCode,label:e.Answer.content.label,onChange:c,onFocus:d,onBlur:s,value:o.textValue,InputProps:{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size}},helperText:o.childInvalid?(0,C.jsx)(A,{component:t,limit:1}):""})})})}():""};var K=function(e){var n=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode],i=null===t||void 0===t?void 0:t.validity;return{invalid:(o||a)&&!1===i}}),r.wU);return(0,C.jsxs)(k.Z,{component:"fieldset",children:[(0,C.jsx)(D.Z,{children:e.component.answers.map((function(n){return"other"===n.type?(0,C.jsx)($,{Answer:n,parentCode:e.component.qualifiedCode},n.qualifiedCode):(0,C.jsx)(J,{Answer:n,parentCode:e.component.qualifiedCode},n.qualifiedCode)}))}),n.showValidation&&e.isSubQuestion?(0,C.jsxs)("div",{className:"MuiFormHelperText-root",children:[(0,C.jsx)(A,{component:e.component,limit:1})," "]}):""]})},X=t(21680),ee=t(19773),ne=t(24390),te=t(69963),oe=t(9827),ae=t(60807);t(94462);var ie=function(e){console.log("rendering Content for: ".concat(e.elementCode,"-").concat(e.name));var n=e.content&&e.content.search(/data-instruction/)>=0,t=(0,r.v9)((function(t){return e.content&&n&&t.runState[e.elementCode]&&e.name&&e.lang?t.runState[e.elementCode]["reference_".concat(e.name,"_").concat(e.lang)]:void 0})),o=(0,r.v9)((function(e){return e.runState.Survey.lang})),a=h.Bc.includes(o);return e.content?n?(0,C.jsx)("div",{className:"".concat(a?"rtl":"ltr"," ql-editor"),dangerouslySetInnerHTML:{__html:re(e.content,t)}}):(0,C.jsx)("div",{className:"".concat(a?"rtl":"ltr"," ql-editor"),dangerouslySetInnerHTML:{__html:e.content}}):""};function re(e,n){var t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("span[data-instruction]").forEach((function(e){var t=e.getAttribute("data-instruction");if(t&&n){var o=t.split(".");o&&2==o.length&&n[o[0]]&&n[o[0]][o[1]]?e.replaceWith(n[o[0]][o[1]]):e.replaceWith("")}else e.replaceWith("")})),t.innerHTML}var le=function(e){var n=(0,j.Z)(),t=(0,r.v9)((function(n){var t,o,a;return{value:null===(t=n.runState[e.answer.qualifiedCode])||void 0===t?void 0:t.value,relevance:null===(o=n.runState[e.answer.qualifiedCode])||void 0===o?void 0:o.relevance,show_errors:n.runState.Survey.show_errors,validity:null===(a=n.runState[e.answer.qualifiedCode])||void 0===a?void 0:a.validity}}),r.wU),o=(0,r.I0)(),a=(t.show_errors||t.isDirty)&&!1===t.validity,l=function(e){o((0,b.T7)({componentCode:e.target.name,value:e.target.value}))};return"undefined"===typeof t.relevance||t.relevance?(0,C.jsxs)(i.Fragment,{children:[(0,C.jsxs)(ae.Z,{children:[(0,C.jsx)(ne.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.answer.content.label}),e.choices.map((function(n){return(0,C.jsx)(ne.Z,{component:"th",scope:"row",children:(0,C.jsx)(z.Z,{name:e.answer.qualifiedCode,onChange:l,checked:t.value===n.code,value:n.code})},n.code)}))]},e.answer.code),a?(0,C.jsx)(ae.Z,{children:(0,C.jsx)(ne.Z,{colSpan:e.choices?e.choices.length+1:1,children:(0,C.jsx)(A,{component:e.answer})})}):""]}):""};var ce=function(e){var n=(0,m.u)(),t=e.component.answers.filter((function(e){return"column"==e.type})),o=e.component.answers.filter((function(e){return"row"==e.type}));return(0,C.jsx)(te.Z,{children:(0,C.jsxs)(X.Z,{children:[(0,C.jsx)(oe.Z,{children:(0,C.jsxs)(ae.Z,{children:[(0,C.jsx)(ne.Z,{},"content"),t.map((function(e){return(0,C.jsx)(ne.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.content.label},e.qualifiedCode)}))]})}),(0,C.jsx)(ee.Z,{children:o.map((function(e){return(0,C.jsx)(i.Fragment,{children:(0,C.jsx)(le,{answer:e,choices:t},e.qualifiedCode)},e.qualifiedCode)}))})]})})},ue=t(75579),de=t(46283),se=t(75904),ve=(0,t(76863).ZP)("input")({display:"none"});var me=function(e){var n,t,o=(0,j.Z)(),l=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode];return null===t||void 0===t?void 0:t.value}),r.wU),c=(0,r.I0)(),u=(0,i.useState)(),d=(0,a.Z)(u,2),s=d[0],v=d[1],m=function(){v(void 0)},p=s&&(!e.component.validation||!e.component.validation.max_file_size||e.component.validation.max_file_size.max_size>s.size/1e3);return(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,C.jsx)(ve,{id:"contained-button-file",type:"file",onChange:function(e){v(e.target.files[0])}}),(0,C.jsx)(ue.Z,{variant:"contained",component:"span",children:"Choose File"})]}),s?(0,C.jsxs)(i.Fragment,{children:[(0,C.jsxs)("span",{children:["\xa0",s.name," - ",Math.round(s.size/1e3),"K"]}),p?(0,C.jsx)(ue.Z,{variant:"text",onClick:function(){(function(e,n){var t=new FormData;return t.append("file",n),se.Z.upload(_.userInput.uploadUrl+_.responseId+"/"+e,t)})(e.component.qualifiedCode,s).then((function(n){m(),c((0,b.T7)({componentCode:e.component.qualifiedCode,value:n.data}))})).catch((function(e){console.error(e)}))},children:"Upload"}):"",(0,C.jsx)(ue.Z,{sx:{fontFamily:o.textStyles.text.font,fontSize:o.textStyles.text.size},variant:"text",onClick:m,children:"Cancel"})]}):"",!s||!e.component.validation||!e.component.validation.max_file_size||e.component.validation.max_file_size.max_size>s.size/1e3?"":(0,C.jsxs)(i.Fragment,{children:[(0,C.jsx)("br",{}),(0,C.jsx)(R,{name:"max_file_size",validation:e.component.validation.max_file_size})]}),l&&l.stored_filename?(0,C.jsxs)(i.Fragment,{children:[(0,C.jsx)("br",{}),(0,C.jsxs)(de.Z,{target:"_blank",href:(n=e.component.qualifiedCode,t=l.filename,_.userInput?_.userInput.uploadPreviewUrl+_.responseId+"/"+n+"/"+t:""),children:[l.filename," - ",Math.round(l.size/1e3),"K"]})]}):""]})},pe=t(71747),fe=t(46293),xe=t(6042),ge=t(59500),he=t(69961),ye=t(17626),Ce="ParagraphQuestion_questionItem__+c+L9",Se="ParagraphQuestion_paragraph__PoId1",_e="ParagraphQuestion_wordCount__bMD6Z";var je=function(e){var n,t,o=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode],i=null===t||void 0===t?void 0:t.validity,r=(o||a)&&!1===i,l=(null===t||void 0===t?void 0:t.value)||"";return{value:l,wordCount:window.FrankieScripts?window.FrankieScripts.wordCount(l):0,invalid:r}}),r.wU),l=(0,r.I0)(),u=(0,c.$)("common").t;function d(){var e=(0,i.useState)(null),n=(0,a.Z)(e,2),t=n[0],o=n[1],r=(0,fe.zV)({click:function(){r.locate()},locationfound:function(e){o(e.latlng),r.flyTo(e.latlng,r.getZoom())},error:function(e){console.log(e)}});return null===t?null:(0,C.jsx)(xe.J,{position:t,children:(0,C.jsx)(ge.G,{children:"You are here"})})}return(0,C.jsxs)("div",{className:Ce,children:[(0,C.jsxs)(he.h,{style:{height:"300px",width:"100%"},center:{lat:51.505,lng:-.09},zoom:10,scrollWheelZoom:!1,children:[(0,C.jsx)(ye.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"./4uMaps/{z}/{x}/{y}.png"}),(0,C.jsx)(d,{})]}),(0,C.jsx)(pe.Z,{className:Se,required:!(null===(n=e.component.validation)||void 0===n||null===(t=n.validation_required)||void 0===t||!t.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,minRows:e.component.minRows||2,label:e.component.content.hint||"",onChange:function(e){l((0,b.T7)({componentCode:e.target.name,value:e.target.value}))},onBlur:function(e){l({type:"SET_DIRTY",componentCode:e.target.name})},value:o.value}),e.component.showWordCount?(0,C.jsx)("div",{className:_e,children:(0,C.jsx)("span",{children:u("word_count",{count:o.wordCount})})}):""]})},we=t(4942),qe=t(92823),Ze=t(24109),Ie=t(74622),be=t(36571),Te=t(7792),ke=t(97892),De=t.n(ke),Ne="DateTimeQuestion_wrapper__SlxG3",ze=t(30418);var Fe=function(e){var n=(0,ze.Z)(),t=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode];return{invalid:(o||a)&&!1===(null===t||void 0===t?void 0:t.validity),value:null!==t&&void 0!==t&&t.value?De()(window.FrankieScripts.sqlDateTimeToDate(null===t||void 0===t?void 0:t.value)):null}}),r.wU),a=(0,r.I0)(),i=function(n){var t=null===n?void 0:n.toDate();console.log(t),a((0,b.T7)({componentCode:e.component.qualifiedCode,value:"date_time"==e.component.type?window.FrankieScripts.toSqlDateTime(t):"time"==e.component.type?window.FrankieScripts.toSqlDateTimeIgnoreDate(t):window.FrankieScripts.toSqlDateTimeIgnoreTime(t)}))},l=e.component.dateFormat?e.component.dateFormat:"DD.MM.YYYY";return(0,C.jsx)("div",{className:Ne,children:(0,C.jsx)(be._,{dateAdapter:Te.y,adapterLocale:"ar-sa",children:"date_time"==e.component.type?(0,C.jsx)(Ie.x,{renderInput:function(e){return(0,C.jsx)(U.Z,(0,o.Z)({onKeyDown:function(e){return e.preventDefault()}},e))},margin:"normal",value:t.value,inputFormat:l+" "+(e.component.fullDayFormat?"HH:mm":"hh:mm A"),ampm:!e.component.fullDayFormat,openTo:"year",views:["year","month","day","hours","minutes"],id:e.component.qualifiedCode,minDate:e.component.minDate?De()(window.FrankieScripts.dateStringToDate(e.component.minDate)):void 0,maxDate:e.component.maxDate?De()(window.FrankieScripts.dateStringToDate(e.component.maxDate)):void 0,error:t.invalid,onChange:i,InputProps:{sx:{fontFamily:n.textStyles.text.font,fontSize:n.textStyles.text.size,color:n.textStyles.text.color}},helperText:e.isSubQuestion&&t.invalid?(0,C.jsx)(A,{component:e.component,limit:1}):""}):"time"==e.component.type?(0,C.jsx)(qe.j,{renderInput:function(e){return(0,C.jsx)(U.Z,(0,o.Z)({onKeyDown:function(e){return e.preventDefault()}},e))},margin:"normal",openTo:"hours",views:["hours","minutes"],ampm:!e.component.fullDayFormat,inputFormat:e.component.fullDayFormat?"HH:mm":"hh:mm A",id:e.component.qualifiedCode,value:t.value,error:t.invalid,onChange:i,InputProps:{sx:(0,we.Z)({fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},"color",n.textStyles.text.color)},helperText:e.isSubQuestion&&t.invalid?(0,C.jsx)(A,{component:e.component,limit:1}):""}):(0,C.jsx)(Ze.M,{renderInput:function(e){return(0,C.jsx)(U.Z,(0,o.Z)({onKeyDown:function(e){return e.preventDefault()}},e))},margin:"normal",openTo:"year",views:["year","month","day"],ampm:!e.component.fullDayFormat,id:e.component.qualifiedCode,inputFormat:l,value:t.value,minDate:e.component.minDate?window.FrankieScripts.dateStringToDate(e.component.minDate):void 0,maxDate:e.component.maxDate?window.FrankieScripts.dateStringToDate(e.component.maxDate):void 0,error:t.invalid,onChange:i,InputProps:{sx:{fontFamily:n.textStyles.text.font,fontSize:n.textStyles.text.size}},helperText:e.isSubQuestion&&t.invalid?(0,C.jsx)(A,{component:e.component,limit:1}):""})})})},Ue="Question_content__jFAGi",Ee="Question_question__aFgvL",Le="Question_required__+6ZIk",Re="Question_textDescription__88ZF7",Ae="Question_groupQuestion__p33V2",Pe="ImageScq_imageContainer__x4txC",Qe="ImageScq_imageGrid__fLJy0",Me="ImageScq_selection__GeLLW",He=t(8047),Ye=t(48928),Ge=t(8181);var Be=function(e){var n=(0,m.u)(),t=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode];return{value:(null===t||void 0===t?void 0:t.value)||"",showValidation:(o||a)&&!1===(null===t||void 0===t?void 0:t.validity)}}),r.wU),o=(0,r.I0)(),a=function(e,n){o((0,b.T7)({componentCode:e,value:n}))};return(0,C.jsx)(He.ZP,{container:!0,className:Qe,children:e.component.answers.map((function(o){return(0,C.jsxs)(He.ZP,{item:!0,xs:12/e.component.columns,children:[(0,C.jsx)(Ye.Z,{className:Pe,onClick:function(){return a(e.component.qualifiedCode,o.code)},style:{backgroundImage:"url('".concat((0,Ge.pT)(o.image),"')"),backgroundColor:n.palette.background.default,margin:e.component.spacing+"px",height:e.component.imageHeight+"px",border:t.value===o.code?"2px solid ".concat(n.palette.primary.main):"2px solid transparent"},children:(0,C.jsx)(z.Z,{className:Me,checked:t.value===o.code,onChange:function(e){return a(e.target.name,e.target.value)},value:o.code,name:e.component.qualifiedCode})}),(0,C.jsx)(w.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:o.content.label})]},o.code)}))})},Ve="ImageMcq_imageGrid__UcHs2",Oe="ImageMcqItem_imageContainer__RfVgB",We="ImageMcqItem_selection__r6Yx9";var Je=function(e){var n=(0,m.u)(),t=(0,r.v9)((function(n){var t=n.runState[e.option.qualifiedCode];return{showAnswer:"undefined"==typeof(null===t||void 0===t?void 0:t.relevance)||t.relevance,checked:(null===t||void 0===t?void 0:t.value)||!1}}),r.wU),o=(0,r.I0)(),a=function(n,t){o((0,b.T7)({componentCode:n,value:t})),o({type:"SET_DIRTY",componentCode:n}),o({type:"SET_DIRTY",componentCode:e.parentCode})};return(0,C.jsxs)(He.ZP,{item:!0,xs:12/e.columns,children:[(0,C.jsx)(Ye.Z,{className:Oe,onClick:function(){return a(e.option.qualifiedCode,!t.checked)},style:{backgroundImage:"url('".concat((0,Ge.pT)(e.option.image),"')"),backgroundColor:n.palette.background.default,margin:e.spacing+"px",height:e.imageHeight+"px",border:t.checked?"2px solid ".concat(n.palette.primary.main):"2px solid transparent"},children:(0,C.jsx)(O.Z,{className:We,onChange:function(n){return a(e.option.qualifiedCode,!t.checked)},checked:t.checked})}),(0,C.jsx)(w.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.option.content.label})]},e.option.code)};var $e=function(e){return(0,m.u)(),(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode];return{value:(null===t||void 0===t?void 0:t.value)||"",showValidation:(o||a)&&!1===(null===t||void 0===t?void 0:t.validity)}}),r.wU),(0,r.I0)(),(0,C.jsx)(He.ZP,{container:!0,className:Ve,children:e.component.answers.map((function(n){return(0,C.jsx)(Je,{option:n,spacing:e.component.spacing,columns:e.component.columns,parentCode:e.component.qualifiedCode,imageHeight:e.component.imageHeight},n.qualifiedCode)}))})};var Ke=function(e){console.log("rendering: "+e.component.code);var n=(0,j.Z)(),t=(0,r.v9)((function(n){var t=n.runState[e.component.qualifiedCode],o=n.runState.Survey.show_errors,a=n.template[e.component.qualifiedCode],i=null===t||void 0===t?void 0:t.validity,r=(o||a)&&!1===i;return{showQuestion:"undefined"===typeof(null===t||void 0===t?void 0:t.relevance)||(null===t||void 0===t?void 0:t.relevance),invalid:r,showValidation:r}}),r.wU);return t.showQuestion?(0,C.jsxs)(w.Z,{sx:{boxShadow:2,borderColor:t.invalid?"error.main":"grey.500",backgroundColor:"background.paper"},className:"".concat(Ae),children:[(0,C.jsx)(w.Z,{style:{fontFamily:n.textStyles.question.font,color:n.textStyles.text.color,fontSize:n.textStyles.question.size},children:(0,C.jsx)(ie,{className:"".concat(Ue," ").concat(Ee),name:"label",lang:e.lang,elementCode:e.component.qualifiedCode,content:e.component.content.label})}),e.component.content.description&&e.component.showDescription?(0,C.jsx)(w.Z,{className:Re,children:(0,C.jsx)(ie,{elementCode:e.component.code,name:"description",lang:e.lang,content:e.component.content.description})}):"",(0,h.q9)(e.component)?(0,C.jsx)("span",{className:"required ".concat(Le),children:"*"}):null,function(){switch(e.component.type){case"date_time":case"date":case"time":return(0,C.jsx)(Fe,{component:e.component},e.component.qualifiedCode);case"scq":return(0,C.jsx)(Q,{component:e.component},e.component.qualifiedCode);case"scq_array":return(0,C.jsx)(ce,{component:e.component},e.component.qualifiedCode);case"file_upload":return(0,C.jsx)(me,{component:e.component},e.component.qualifiedCode);case"mcq":return(0,C.jsx)(K,{component:e.component},e.component.qualifiedCode);case"number":return(0,C.jsx)(V,{component:e.component},e.component.qualifiedCode);case"text":return(0,C.jsx)(H,{component:e.component},e.component.qualifiedCode);case"paragraph":return(0,C.jsx)(je,{component:e.component},e.component.qualifiedCode);case"email":return(0,C.jsx)(G,{component:e.component},e.component.qualifiedCode);case"image_scq":return(0,C.jsx)(Be,{component:e.component},e.component.qualifiedCode);case"image_mcq":return(0,C.jsx)($e,{component:e.component},e.component.qualifiedCode);default:return""}}(),t.showValidation?(0,C.jsx)(A,{component:e.component}):""]}):""},Xe="Group_textHeader__eTNzG",en="Group_textDescription__ol3gC",nn="Group_titleRow__MiTwq",tn="Group_groupHeader__b0JUF";var on=function(e){console.log("rendering: "+e.group.code);var n=(0,j.Z)();return(0,r.v9)((function(n){var t=n.runState[e.group.code];return{showGroup:"undefined"===typeof(null===t||void 0===t?void 0:t.relevance)||t.relevance}}),r.wU).showGroup&&(e.group?function(){var t,o;return(0,C.jsxs)(i.Fragment,{children:[(0,C.jsxs)(w.Z,{sx:{borderColor:"grey.500",boxShadow:1,backgroundColor:"background.paper"},className:"card-custom",children:[(0,C.jsx)(w.Z,{sx:{backgroundColor:"primary.main",height:"8px"},className:tn}),(0,C.jsxs)(w.Z,{sx:{backgroundColor:"background.paper"},className:nn,children:[(0,C.jsx)("div",{className:Xe,style:{fontFamily:n.textStyles.group.font,color:n.textStyles.group.color,fontSize:n.textStyles.group.size},children:(0,C.jsx)(ie,{elementCode:e.group.code,name:"label",lang:e.lang,content:null===(t=e.group.content)||void 0===t?void 0:t.label})}),(0,C.jsx)(w.Z,{className:en,children:(0,C.jsx)(ie,{elementCode:e.group.code,name:"description",lang:e.lang,content:null===(o=e.group.content)||void 0===o?void 0:o.description})})]})]}),e.group&&e.group.questions?e.group.questions.filter((function(e){return e.inCurrentNavigation})).map((function(n){return(0,C.jsx)(Ke,{component:n,lang:e.lang},n.code)})):""]})}():"")};var an=function(e){var n=(0,r.v9)((function(e){return{navigation:e.runState.navigation,has_previous:e.runState.Survey.has_previous,has_next:e.runState.Survey.has_next}}),r.wU),t=(0,r.I0)(),o=(0,c.$)("common").t;return(0,i.useEffect)((function(){"undefined"!==typeof n.navigation&&e.navigate(n.navigation)})),"end"==e.navigationIndex.name?"":(0,C.jsxs)("div",{className:"pb-10",children:[n.has_previous?(0,C.jsx)(ue.Z,{variant:"contained",className:"mr-14",onClick:function(){t((0,b.lJ)())},children:o("previous")}):"",(0,C.jsx)(ue.Z,{variant:"contained",onClick:function(){t((0,b.Jw)())},children:n.has_next?o("next"):o("finish")})]})},rn="Survey_surveyContent__xXZ5t",ln="Survey_surveyGroups__cshuO",cn="Survey_cardImage__vPKnl",un="Survey_surveyEmpty__BJGOc";var dn=function(e){var n=(0,j.Z)();return"Error"==e.navigationIndex.name?(0,C.jsx)(w.Z,{className:un,children:"Nothing to Show... Check Survey Design"}):(0,C.jsxs)("form",{className:"survey-page",style:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:[(0,C.jsx)(T,{lang:e.lang,additionalLang:e.additionalLang,navigate:e.navigate}),(0,C.jsx)("div",{className:rn,children:(0,C.jsxs)("div",{className:ln,children:[e.survey.headerImage?(0,C.jsx)(q.Z,{className:cn,component:"img",image:(0,Ge.pT)(e.survey.headerImage)}):null,e.survey&&e.survey.groups?e.survey.groups.filter((function(e){return e.inCurrentNavigation})).map((function(n){return(0,C.jsx)(on,{group:n,lang:e.lang.code},n.code)})):"",(0,C.jsx)(an,{navigationIndex:e.navigationIndex,navigate:e.navigate})]})})]})},sn=t(83708),vn={groupCard:"SurveyIndex_groupCard__plcrz",groupTitle:"SurveyIndex_groupTitle__1hB6-",questionTitle:"SurveyIndex_questionTitle__jmXeg",validationIcon:"SurveyIndex_validationIcon__vIkpE",bullet:"SurveyIndex_bullet__OduI5"},mn=t(57126),pn=t(18384),fn=t(74568);var xn=function(e){var n=(0,m.u)(),t=(0,r.I0)(),a=(0,r.v9)((function(e){return e.runState.Survey.relevance_map}),r.wU),l=(0,r.v9)((function(e){return e.runState.navigation}),r.wU);(0,i.useEffect)((function(){"undefined"!==typeof l&&e.navigate(l)}));var c=(0,r.v9)((function(e){return e.runState.Survey.validity_map}),r.wU);console.log(e);var u=function(n){return"group"==e.navigationIndex.name&&n==e.navigationIndex.groupId},d=function(n){return"question"==e.navigationIndex.name&&n==e.navigationIndex.questionId},s=function(n){return!u(n)&&"group"==e.navigationIndex.name},v=function(n){return!d(n)&&"question"==e.navigationIndex.name};return(0,C.jsx)("div",{className:vn.surveyContent,children:e.survey&&e.survey.groups?e.survey.groups.filter((function(e){return a[e.code]&&"END"!=e.groupType})).map((function(i){return(0,C.jsxs)(Ye.Z,{onClick:function(){return n=i.code,void(s(n)&&t((0,b.cW)((0,o.Z)((0,o.Z)({},e.navigationIndex),{},{groupId:n}))));var n},className:vn.groupCard,style:{backgroundColor:u(i.code)?"beige":n.palette.background.paper,cursor:s(i.code)?"pointer":"default"},children:[(0,C.jsxs)(W.Z,{className:vn.groupTitle,children:[(0,mn.oN)(i.content.label)," "]}),i.questions.filter((function(e){return a[e.code]})).map((function(n){return(0,C.jsxs)(W.Z,{onClick:function(){return a=n.code,void(v(a)&&t((0,b.cW)((0,o.Z)((0,o.Z)({},e.navigationIndex),{},{questionId:a}))));var a},className:vn.questionTitle,style:{backgroundColor:d(n.code)?"beige":"inherit",cursor:s(i.code)?"inherit":v(i.code)?"pointer":"default"},children:[c[n.code]?(0,C.jsx)(pn.Z,{className:vn.validationIcon}):(0,C.jsx)(fn.Z,{className:vn.bullet}),(0,mn.oN)(n.content.label)]},n.code)}))]},i.code)})):""})};var gn=function(){var e;console.log("RunSurvey");var n=(0,i.useState)({}),t=(0,a.Z)(n,2),x=t[0],g=t[1],y=(0,i.useState)(null),j=(0,a.Z)(y,2),w=j[0],q=j[1],Z=(0,c.$)("common").i18n,I=(0,r.I0)(),T=window.location.search,k=function(e){var n=e.get("lang"),t=e.get("response_id"),o="http://"+e.get("url")+"/api/"+e.get("sid")+"/navigate",a="http://"+e.get("url")+"/api/"+e.get("sid")+"/runtime.js",i="http://"+e.get("url")+"/survey/upload/"+e.get("sid")+"/",r="http://"+e.get("url")+"/survey/"+e.get("sid")+"/upload/",l=e.get("navigation_mode"),c=JSON.parse(e.get("navigation_direction"));return c||t?c||(c={name:"RESUME"}):c={name:"START"},{url:o,scriptUrl:a,uploadUrl:i,uploadPreviewUrl:r,lang:n,navigationMode:l,responseId:t,navigationDirection:c}}(new URLSearchParams(T)),D=function(e){q(null),function(e,n,t){return console.log(n),se.Z.post(e,(0,o.Z)((0,o.Z)({},n),{},{responseId:t}))}(k.url,e,x.responseId).then((function(e){g({}),I((0,b.zc)(e.data)),Z.changeLanguage(e.data.lang.code),g(e.data)})).catch((function(e){q({errorType:"click",message:e.message})}))};(0,i.useEffect)((function(){h.Bc.includes(Z.language)?document.dir="rtl":document.dir="ltr"}),[Z.language]),(0,i.useEffect)((function(){var e;F()&&(q(null),(e=k.scriptUrl,new Promise((function(n){var t=document.createElement("script");t.async=!1,t.src=e,document.body.appendChild(t),t.addEventListener("load",n,{once:!0})}))).then((function(){(function(e){return se.Z.post(e.url,{responseId:e.responseId,navigationMode:e.navigationMode,lang:e.lang,navigationDirection:e.navigationDirection})})(k).then((function(e){g(null),"Error"!=e.data.navigationIndex.name&&(I((0,b.zc)(e.data)),Object.isFrozen(_)||(_.userInput=k,_.responseId=e.data.responseId,Object.freeze(_))),Z.changeLanguage(e.data.lang.code),g(e.data)})).catch((function(e){console.error(e),q({errorType:"startup",message:e.message})}))})))}));var N=(0,u.Z)((0,o.Z)((0,o.Z)({},(0,sn.ph)(null===x||void 0===x||null===(e=x.survey)||void 0===e?void 0:e.theme)),{},{direction:h.Bc.includes(Z.language)?"rtl":"ltr"})),z=(0,p.Z)({key:h.Bc.includes(Z.language)?"muirtl":"muiltr",stylisPlugins:h.Bc.includes(Z.language)?[v.Ji,s.Z]:null});function F(){return!x||0===Object.keys(x).length&&x.constructor===Object}return(0,C.jsx)(m.C,{value:z,children:(0,C.jsx)(d.Z,{theme:N,children:(0,C.jsxs)(f.Z,{children:[!F()&&(0,C.jsxs)("div",{className:l,children:[(0,C.jsx)(dn,{navigate:D,survey:null===x||void 0===x?void 0:x.survey,navigationIndex:null===x||void 0===x?void 0:x.navigationIndex,lang:null===x||void 0===x?void 0:x.lang,additionalLang:null===x||void 0===x?void 0:x.additionalLang,error:w},"Survey"),(0,C.jsx)(xn,{navigate:D,navigationIndex:null===x||void 0===x?void 0:x.navigationIndex,survey:null===x||void 0===x?void 0:x.survey})]}),w?(0,C.jsx)(S,{error:w,variant:"toast"}):null]})})})}}}]);
//# sourceMappingURL=597.cba26880.chunk.js.map