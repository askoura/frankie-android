"use strict";(self.webpackChunkfrankie_react=self.webpackChunkfrankie_react||[]).push([[677],{64617:function(e,n,o){o.d(n,{Z:function(){return d}});o(72791);var t=o(95048),i=o(25248),a="Layout_main__FV28D",r=o(50228),l=o(80184);function d(e){var n=(0,t.v9)((function(e){return e.template.isLoading}));return(0,l.jsxs)(r.Z,{className:a,sx:{backgroundColor:"background.default",color:"text.primary"},children:[n?(0,l.jsx)(i.Z,{}):null,e.children]})}},90893:function(e,n,o){o.r(n),o.d(n,{default:function(){return Gn}});var t=o(1413),i=o(29439),a=o(72791),r=o(95048),l={mainContainer:"RunSurvey_mainContainer__7X1z1",drawer:"RunSurvey_drawer__MthXI"},d=o(22020),u=o(21703),c=o(57012),s=o(93740),v=o(8197),m=o(29886),p=o(24086),f=o(64617),x=o(11647),g=o(8771),h=o(15614),C="ErrorMessage_errorContent__wbGeh",y=o(80184);function _(e){var n=(0,a.useState)(!0),o=(0,i.Z)(n,2),t=o[0],r=o[1],l=(0,a.useState)("ltr"),u=(0,i.Z)(l,2),c=u[0],s=u[1],v=function(){r(!1)},m=(0,d.$)("common").i18n;return(0,a.useEffect)((function(){h.Bc.includes(m.language)?s("rtl"):s("ltr")}),[m.language]),"toast"===e.variant?(0,y.jsx)(x.Z,{open:t,autoHideDuration:6e3,onClose:v,children:(0,y.jsx)(g.Z,{variant:"standard",severity:e.severity||"error",onClose:v,dir:c,children:e.error.message})}):(0,y.jsx)("div",{className:"error-page ".concat(e.className||""),children:(0,y.jsx)("div",{className:C,children:(0,y.jsx)(g.Z,{severity:e.severity||"error",variant:"standard",dir:c,children:e.error.message})})})}var S={},j=o(74142),q=o(50228),w=o(30199),Z=o(24643),b=o(43432),I="ValidationItem_wrapper__gV9Wb",k=o(88551);var T=function(e){var n=(0,d.$)("common").t;return function(){var o="";if(e.validation.content&&e.validation.isCustomErrorActive)o=e.validation.content;else{var i=e.name.replace(/[0-9]/g,"");o=n(i,(0,t.Z)({},e.validation))}return o?(0,y.jsxs)(q.Z,{sx:{color:"error.main"},className:I,children:[(0,y.jsx)(k.Z,{}),o]}):""}()};var N=function(e){var n=(0,r.v9)((function(n){if(e.component.validation){var o={};return Object.keys(e.component.validation).forEach((function(t){var i=n.runState.values[e.component.qualifiedCode][t];i&&(o[t]=i)})),o}return{}}));return function(){if(e.component.validation){var o=Object.keys(e.component.validation).filter((function(e){return n[e]})),t=e.limit?e.limit:o.length;return o.slice(0,t).map((function(n,o){return(0,y.jsx)(T,{name:n,validation:e.component.validation[n]},o)}))}return""}()},D=o(62033),z=o(44059),E=o(45254),F=o(83492);function R(e){var n=(0,j.Z)(),o=function(){return(0,y.jsx)(b.Z,{control:(0,y.jsx)(D.Z,{}),label:(0,y.jsx)(q.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.Choice.content.label}),value:e.Choice.code},e.Choice.qualifiedCode)};return o?o():""}function U(e){var n=(0,j.Z)(),o=e.Choice.answers[0],t=(0,r.v9)((function(n){var t=n.runState.values[e.Choice.qualifiedCode],i=n.runState.values[o.qualifiedCode],a=n.runState.values.Survey.show_errors,r=n.template[o.qualifiedCode];return{showChoice:"undefined"===typeof(null===t||void 0===t?void 0:t.relevance)||t.relevance,childInvalid:(a||r)&&!0===(null===i||void 0===i?void 0:i.relevance)&&!1===(null===i||void 0===i?void 0:i.validity),value:(null===i||void 0===i?void 0:i.value)||""}}),r.wU),i=(0,r.I0)(),l=function(e){i((0,z.T7)({componentCode:e.target.name,value:e.target.value}))},d=function(n){i((0,z.T7)({componentCode:e.parentCode,value:e.Choice.code}))},u=function(e){i({type:"SET_DIRTY",componentCode:e.target.name})},c=(0,a.useRef)(),s=function(e){e.target.checked&&c.current.focus()};return t.showChoice?function(){var i,a;return(0,y.jsxs)("div",{className:"text-left d-flex",children:[(0,y.jsx)(b.Z,{control:(0,y.jsx)(D.Z,{}),label:(0,y.jsx)("div",{className:"w-100",children:(0,y.jsx)(Z.Z,{variant:"standard",required:(null===(i=t.textChild)||void 0===i?void 0:i.relevance)&&(null===(a=o.validation)||void 0===a?void 0:a.required),inputRef:c,id:o.qualifiedCode,name:o.qualifiedCode,label:e.Choice.content.label,onChange:l,onFocus:d,onBlur:u,value:t.value,InputProps:{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size}},helperText:t.childInvalid?(0,y.jsx)(N,{component:o,limit:1}):""})}),onChange:s,value:e.Choice.code},e.Choice.qualifiedCode),(0,y.jsx)("p",{})]})}():""}var P=function(e){var n=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode];return{value:(null===o||void 0===o?void 0:o.value)||""}}),r.wU),o=(0,r.I0)();return(0,y.jsx)(E.Z,{component:"fieldset",children:(0,y.jsx)(F.Z,{name:e.component.qualifiedCode,value:n.value,onChange:function(e){o((0,z.T7)({componentCode:e.target.name,value:e.target.value}))},children:e.component.answers.map((function(n){return"other"===n.type?(0,y.jsx)(U,{parentCode:e.component.qualifiedCode,Choice:n},n.qualifiedCode):(0,y.jsx)(R,{Choice:n},n.qualifiedCode)}))})})},L="TextQuestion_questionItem__ormJL";var A=function(e){var n,o,t=(0,j.Z)(),i=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode],t=n.runState.values.Survey.show_errors,i=n.template[e.component.qualifiedCode],a=null===o||void 0===o?void 0:o.validity,r=(t||i)&&!1===a;return{value:(null===o||void 0===o?void 0:o.value)||"",invalid:r}}),r.wU),a=(0,r.I0)();return(0,y.jsx)("div",{className:L,children:(0,y.jsx)(Z.Z,{variant:"standard",required:!(null===(n=e.component.validation)||void 0===n||null===(o=n.validation_required)||void 0===o||!o.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,label:e.component.content.hint||"",onChange:function(e){a((0,z.T7)({componentCode:e.target.name,value:e.target.value}))},onBlur:function(e){a({type:"SET_DIRTY",componentCode:e.target.name})},inputProps:{maxLength:e.component.maxChars||void 0},value:i.value,error:i.invalid,InputProps:{sx:{fontFamily:t.textStyles.text.font,color:t.textStyles.text.color,fontSize:t.textStyles.text.size}}})})},M="EmailQuestion_questionItem__3p9Xg";var H=function(e){var n,o,t=(0,j.Z)(),i=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode],t=n.runState.values.Survey.show_errors,i=n.template[e.component.qualifiedCode],a=null===o||void 0===o?void 0:o.validity,r=(t||i)&&!1===a;return{value:(null===o||void 0===o?void 0:o.value)||"",invalid:r}}),r.wU),a=(0,r.I0)();return(0,y.jsx)("div",{className:M,children:(0,y.jsx)(Z.Z,{variant:"standard",required:!(null===(n=e.component.validation)||void 0===n||null===(o=n.validation_required)||void 0===o||!o.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,label:e.component.content.hint||"",onChange:function(e){a((0,z.T7)({componentCode:e.target.name,value:e.target.value}))},onBlur:function(e){a({type:"SET_DIRTY",componentCode:e.target.name})},inputProps:{type:"email",maxLength:e.component.maxChars||void 0},value:i.value,error:i.invalid,InputProps:{sx:{fontFamily:t.textStyles.text.font,color:t.textStyles.text.color,fontSize:t.textStyles.text.size}}})})},W="NumberQuestion_questionItem__XR4g8";var Y=function(e){var n,o,t=(0,j.Z)(),i=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode],t=n.runState.values.Survey.show_errors,i=n.template[e.component.qualifiedCode],a=null===o||void 0===o?void 0:o.validity,r=(t||i)&&!1===a;return{value:void 0===(null===o||void 0===o?void 0:o.value)?"":null===o||void 0===o?void 0:o.value,invalid:r}}),r.wU),a=(0,r.I0)();return(0,y.jsx)("div",{className:W,children:(0,y.jsx)(Z.Z,{variant:"standard",required:!(null===(n=e.component.validation)||void 0===n||null===(o=n.validation_required)||void 0===o||!o.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,label:e.component.content.hint||"",onChange:function(n){var o=e.component.allowDecimal?/^[0-9]*[.]*[0-9]*$/:/^[0-9]*$/;if(""===n.target.value||o.test(n.target.value)){var t=+n.target.value;a((0,z.T7)({componentCode:n.target.name,value:""===n.target.value||isNaN(t)||n.target.value.endsWith(".")||/^[0][.][0]+$/.test(n.target.value)?n.target.value:t}))}},onBlur:function(e){a({type:"SET_DIRTY",componentCode:e.target.name})},inputProps:{maxLength:e.component.maxChars||void 0},value:i.value,error:i.invalid,InputProps:{sx:{fontFamily:t.textStyles.text.font,color:t.textStyles.text.color,fontSize:t.textStyles.text.size}}})})},B=o(61094);function G(e){var n=(0,j.Z)(),o=(0,r.v9)((function(n){var o,t=n.runState.values[null===(o=e.Answer)||void 0===o?void 0:o.qualifiedCode];return{showAnswer:"undefined"==typeof(null===t||void 0===t?void 0:t.relevance)||t.relevance,checked:(null===t||void 0===t?void 0:t.value)||!1}}),r.wU),t=(0,r.I0)();return o.showAnswer?(0,y.jsx)(b.Z,{control:(0,y.jsx)(B.Z,{checked:o.checked,onChange:function(n){t((0,z.T7)({componentCode:n.target.name,value:n.target.checked})),t({type:"SET_DIRTY",componentCode:n.target.name}),t({type:"SET_DIRTY",componentCode:e.parentCode})},name:e.Answer.qualifiedCode}),label:(0,y.jsx)(q.Z,{sx:{fontFamily:n.textStyles.text.font,fontSize:n.textStyles.text.size},children:e.Answer.content.label})}):""}function Q(e){var n=(0,j.Z)(),o=e.Answer.answers[0],t=(0,r.v9)((function(n){var t,i=n.runState.values[e.Answer.qualifiedCode],a=n.runState.values[o.qualifiedCode],r=n.runState.values.Survey.show_errors,l=n.template[o.qualifiedCode];return{showAnswer:"undefined"===typeof(null===i||void 0===i?void 0:i.relevance)||i.relevance,childInvalid:(r||l)&&!0===(null===a||void 0===a?void 0:a.relevance)&&!1===(null===a||void 0===a?void 0:a.validity),checked:(null===i||void 0===i?void 0:i.value)||!1,textValue:(null===a||void 0===a?void 0:a.value)||"",textRelevance:null===(t=n.textChild)||void 0===t?void 0:t.relevance}}),r.wU),i=(0,r.I0)(),l=function(n){i((0,z.T7)({componentCode:n.target.name,value:n.target.checked})),i({type:"SET_DIRTY",componentCode:n.target.name}),i({type:"SET_DIRTY",componentCode:e.parentCode}),n.target.checked&&u.current.focus()},d=function(e){i((0,z.T7)({componentCode:e.target.name,value:e.target.value}))},u=(0,a.useRef)(),c=function(n){i((0,z.T7)({componentCode:e.Answer.qualifiedCode,value:!0}))},s=function(e){i({type:"SET_DIRTY",componentCode:e.target.name})};return t.showAnswer?function(){var i;return(0,y.jsx)(b.Z,{control:(0,y.jsx)(B.Z,{checked:t.checked,onChange:l,name:e.Answer.qualifiedCode}),label:(0,y.jsx)("div",{className:"w-100",children:(0,y.jsx)(Z.Z,{variant:"standard",required:t.textRelevance&&(null===(i=o.validation)||void 0===i?void 0:i.required),inputRef:u,id:o.qualifiedCode,name:o.qualifiedCode,label:e.Answer.content.label,onChange:d,onFocus:c,onBlur:s,value:t.textValue,InputProps:{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size}},helperText:t.childInvalid?(0,y.jsx)(N,{component:o,limit:1}):""})})})}():""}var O=function(e){return(0,y.jsx)(E.Z,{component:"fieldset",children:(0,y.jsx)(F.Z,{children:e.component.answers.map((function(n){return"other"===n.type?(0,y.jsx)(Q,{Answer:n,parentCode:e.component.qualifiedCode},n.qualifiedCode):(0,y.jsx)(G,{Answer:n,parentCode:e.component.qualifiedCode},n.qualifiedCode)}))})})},K=o(21680),J=o(19773),V=o(24390),$=o(69963),X=o(9827),ee=o(60807);function ne(e){var n=(0,m.u)(),o=(0,r.v9)((function(n){var o,t,i;return{show_errors:n.runState.values.Survey.show_errors,validity:null===(o=n.runState.values[e.answer.qualifiedCode])||void 0===o?void 0:o.validity,value:null===(t=n.runState.values[e.answer.qualifiedCode])||void 0===t?void 0:t.value,relevance:null===(i=n.runState.values[e.answer.qualifiedCode])||void 0===i?void 0:i.relevance}}),r.wU),t=(0,r.I0)(),i=function(e){t((0,z.T7)({componentCode:e.target.name,value:e.target.value}))},l=(o.show_errors||o.isDirty)&&!1===o.validity;return"undefined"===typeof o.relevance||o.relevance?(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)(ee.Z,{children:[(0,y.jsx)(V.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size,borderBottom:l?"0":"",padding:"8px"},children:e.answer.content.label}),e.choices.map((function(n){return(0,y.jsx)(V.Z,{component:"th",scope:"row",sx:{borderBottom:l?"0":"",padding:"8px"},children:(0,y.jsx)(D.Z,{name:e.answer.qualifiedCode,onChange:i,checked:o.value===n.code,value:n.code})},n.code)}))]},e.answer.code),l?(0,y.jsx)(ee.Z,{children:(0,y.jsx)(V.Z,{sx:{padding:"8px"},colSpan:e.choices?e.choices.length+1:1,children:(0,y.jsx)(N,{component:e.answer})})}):""]}):""}var oe=function(e){var n=(0,m.u)(),o=e.component.answers.filter((function(e){return"column"==e.type})),t=e.component.answers.filter((function(e){return"row"==e.type}));return(0,y.jsx)($.Z,{children:(0,y.jsxs)(K.Z,{children:[(0,y.jsx)(X.Z,{children:(0,y.jsxs)(ee.Z,{children:[(0,y.jsx)(V.Z,{},"content"),o.map((function(e){return(0,y.jsx)(V.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.content.label},e.qualifiedCode)}))]})}),(0,y.jsx)(J.Z,{children:t.map((function(e){return(0,y.jsx)(a.Fragment,{children:(0,y.jsx)(ne,{answer:e,choices:o},e.qualifiedCode)},e.qualifiedCode)}))})]})})},te=o(75579),ie=o(46283),ae=o(75904),re=function(e){return fetch(e).then((function(e){return e.blob()})).then((function(e){return new Promise((function(n){var o=new FileReader;o.onload=function(){n(this.result)},o.readAsDataURL(e)}))}))},le=function(e,n){return S.userInput?S.userInput.uploadPreviewUrl+S.responseId+"/"+e+"/"+n:""},de=(0,o(76863).ZP)("input")({display:"none"});var ue=function(e){var n=(0,j.Z)(),o=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode];return null===o||void 0===o?void 0:o.value}),r.wU),t=(0,r.I0)(),l=(0,a.useState)(),d=(0,i.Z)(l,2),u=d[0],c=d[1],s=function(){c(void 0)},v=u&&(!e.component.validation||!e.component.validation.max_file_size||e.component.validation.max_file_size.max_size>u.size/1e3);return(0,y.jsxs)("div",{children:[(0,y.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,y.jsx)(de,{id:"contained-button-file",type:"file",onChange:function(e){c(e.target.files[0])}}),(0,y.jsx)(te.Z,{variant:"contained",component:"span",children:"Choose File"})]}),u?(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)("span",{children:["\xa0",u.name," - ",Math.round(u.size/1e3),"K"]}),v?(0,y.jsx)(te.Z,{variant:"text",onClick:function(){(function(e,n){var o=new FormData;return o.append("file",n),ae.Z.upload(S.userInput.uploadUrl+S.responseId+"/"+e,o)})(e.component.qualifiedCode,u).then((function(n){s(),t((0,z.T7)({componentCode:e.component.qualifiedCode,value:n.data}))})).catch((function(e){console.error(e)}))},children:"Upload"}):"",(0,y.jsx)(te.Z,{sx:{fontFamily:n.textStyles.text.font,fontSize:n.textStyles.text.size},variant:"text",onClick:s,children:"Cancel"})]}):"",!u||!e.component.validation||!e.component.validation.max_file_size||e.component.validation.max_file_size.max_size>u.size/1e3?"":(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)("br",{}),(0,y.jsx)(T,{name:"max_file_size",validation:e.component.validation.max_file_size})]}),o&&o.stored_filename?(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)("br",{}),(0,y.jsxs)(ie.Z,{target:"_blank",href:le(e.component.qualifiedCode,o.filename),children:[o.filename," - ",Math.round(o.size/1e3),"K"]})]}):""]})},ce=o(71747),se="ParagraphQuestion_questionItem__+c+L9",ve="ParagraphQuestion_paragraph__PoId1",me="ParagraphQuestion_wordCount__bMD6Z";var pe=function(e){var n,o,t=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode],t=n.runState.values.Survey.show_errors,i=n.template[e.component.qualifiedCode],a=null===o||void 0===o?void 0:o.validity,r=(t||i)&&!1===a,l=(null===o||void 0===o?void 0:o.value)||"";return{value:l,wordCount:window.FrankieScripts?window.FrankieScripts.wordCount(l):0,invalid:r}}),r.wU),i=(0,r.I0)(),a=(0,d.$)("common").t;return(0,y.jsxs)("div",{className:se,children:[(0,y.jsx)(ce.Z,{className:ve,required:!(null===(n=e.component.validation)||void 0===n||null===(o=n.validation_required)||void 0===o||!o.isActive),id:e.component.qualifiedCode,name:e.component.qualifiedCode,minRows:e.component.minRows||2,label:e.component.content.hint||"",onChange:function(e){i((0,z.T7)({componentCode:e.target.name,value:e.target.value}))},onBlur:function(e){i({type:"SET_DIRTY",componentCode:e.target.name})},value:t.value}),e.component.showWordCount?(0,y.jsx)("div",{className:me,children:(0,y.jsx)("span",{children:a("word_count",{count:t.wordCount})})}):""]})};o(94462);var fe=function(e){var n=e.content&&e.content.search(/data-instruction/)>=0,o=(0,r.v9)((function(o){return e.content&&n&&o.runState.values[e.elementCode]&&e.name&&e.lang?o.runState.values[e.elementCode]["reference_".concat(e.name,"_").concat(e.lang)]:void 0})),t=(0,r.v9)((function(e){return e.runState.values.Survey.lang})),i=h.Bc.includes(t);return e.content?n?(0,y.jsx)("div",{className:"".concat(i?"rtl":"ltr"," ql-editor no-padding"),dangerouslySetInnerHTML:{__html:xe(e.content,o)}}):(0,y.jsx)("div",{className:"".concat(i?"rtl":"ltr"," ql-editor no-padding"),dangerouslySetInnerHTML:{__html:e.content}}):""};function xe(e,n){var o=document.createElement("div");return o.innerHTML=e,o.querySelectorAll("span[data-instruction]").forEach((function(e){var o=e.getAttribute("data-instruction");if(o&&n){var t=o.split(".");t&&2==t.length&&n[t[0]]&&n[t[0]][t[1]]?e.replaceWith(n[t[0]][t[1]]):e.replaceWith("")}else e.replaceWith("")})),o.innerHTML}var ge=o(4942),he=o(92823),Ce=o(24109),ye=o(74622),_e=o(36571),Se=o(7792),je=o(97892),qe=o.n(je),we="DateTimeQuestion_wrapper__SlxG3",Ze=o(30418);var be=function(e){var n=(0,Ze.Z)(),o=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode],t=n.runState.values.Survey.show_errors,i=n.template[e.component.qualifiedCode];return{invalid:(t||i)&&!1===(null===o||void 0===o?void 0:o.validity),value:null!==o&&void 0!==o&&o.value?qe()(window.FrankieScripts.sqlDateTimeToDate(null===o||void 0===o?void 0:o.value)):null}}),r.wU),i=(0,r.I0)(),a=function(n){var o=null===n?void 0:n.toDate();i((0,z.T7)({componentCode:e.component.qualifiedCode,value:"date_time"==e.component.type?window.FrankieScripts.toSqlDateTime(o):"time"==e.component.type?window.FrankieScripts.toSqlDateTimeIgnoreDate(o):window.FrankieScripts.toSqlDateTimeIgnoreTime(o)}))},l=e.component.dateFormat?e.component.dateFormat:"DD.MM.YYYY";return(0,y.jsx)("div",{className:we,children:(0,y.jsx)(_e._,{dateAdapter:Se.y,adapterLocale:"ar-sa",children:"date_time"==e.component.type?(0,y.jsx)(ye.x,{renderInput:function(e){return(0,y.jsx)(Z.Z,(0,t.Z)({onKeyDown:function(e){return e.preventDefault()}},e))},margin:"normal",value:o.value,inputFormat:l+" "+(e.component.fullDayFormat?"HH:mm":"hh:mm A"),ampm:!e.component.fullDayFormat,openTo:"year",views:["year","month","day","hours","minutes"],id:e.component.qualifiedCode,minDate:e.component.minDate?qe()(window.FrankieScripts.dateStringToDate(e.component.minDate)):void 0,maxDate:e.component.maxDate?qe()(window.FrankieScripts.dateStringToDate(e.component.maxDate)):void 0,error:o.invalid,onChange:a,InputProps:{sx:{fontFamily:n.textStyles.text.font,fontSize:n.textStyles.text.size,color:n.textStyles.text.color}}}):"time"==e.component.type?(0,y.jsx)(he.j,{renderInput:function(e){return(0,y.jsx)(Z.Z,(0,t.Z)({onKeyDown:function(e){return e.preventDefault()}},e))},margin:"normal",openTo:"hours",views:["hours","minutes"],ampm:!e.component.fullDayFormat,inputFormat:e.component.fullDayFormat?"HH:mm":"hh:mm A",id:e.component.qualifiedCode,value:o.value,error:o.invalid,onChange:a,InputProps:{sx:(0,ge.Z)({fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},"color",n.textStyles.text.color)}}):(0,y.jsx)(Ce.M,{renderInput:function(e){return(0,y.jsx)(Z.Z,(0,t.Z)({onKeyDown:function(e){return e.preventDefault()}},e))},margin:"normal",openTo:"year",views:["year","month","day"],ampm:!e.component.fullDayFormat,id:e.component.qualifiedCode,inputFormat:l,value:o.value,minDate:e.component.minDate?window.FrankieScripts.dateStringToDate(e.component.minDate):void 0,maxDate:e.component.maxDate?window.FrankieScripts.dateStringToDate(e.component.maxDate):void 0,error:o.invalid,onChange:a,InputProps:{sx:{fontFamily:n.textStyles.text.font,fontSize:n.textStyles.text.size}}})})})},Ie="Question_content__jFAGi",ke="Question_question__aFgvL",Te="Question_header__eglYU",Ne="Question_textDescription__88ZF7",De="Question_groupQuestion__p33V2",ze="ImageScq_imageContainer__x4txC",Ee="ImageScq_imageGrid__fLJy0",Fe="ImageScq_selection__GeLLW",Re=o(8047),Ue=o(48928),Pe=o(8181);var Le=function(e){var n=(0,m.u)(),o=(0,a.useRef)(null),t=(0,a.useState)(800),l=(0,i.Z)(t,2),d=l[0],u=l[1];(0,a.useEffect)((function(){var e;u(null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.offsetWidth)}),[o]);var c=(d-e.component.columns*e.component.spacing*2)/e.component.columns/(e.component.imageAspectRatio||1),s=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode],t=n.runState.values.Survey.show_errors,i=n.template[e.component.qualifiedCode];return{value:(null===o||void 0===o?void 0:o.value)||"",showValidation:(t||i)&&!1===(null===o||void 0===o?void 0:o.validity)}}),r.wU),v=(0,r.I0)(),p=function(e,n){v((0,z.T7)({componentCode:e,value:n}))};return(0,a.useEffect)((function(){var e=function(){var e;u(null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.offsetWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,y.jsx)(Re.ZP,{ref:o,container:!0,className:Ee,children:e.component.answers.map((function(o){var t=o.image?"url('".concat((0,Pe.pT)(o.image),"')"):"0";return(0,y.jsxs)(Re.ZP,{item:!0,xs:12/e.component.columns,children:[(0,y.jsx)(Ue.Z,{className:ze,onClick:function(){return p(e.component.qualifiedCode,o.code)},style:{backgroundImage:t,backgroundColor:n.palette.background.default,margin:e.component.spacing+"px",height:c+"px",border:s.value===o.code?"2px solid ".concat(n.palette.primary.main):"2px solid transparent"},children:(0,y.jsx)(D.Z,{className:Fe,checked:s.value===o.code,onChange:function(e){return p(e.target.name,e.target.value)},value:o.code,name:e.component.qualifiedCode})}),!e.component.hideText&&(0,y.jsx)(q.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:o.content.label})]},o.code)}))})},Ae="ImageMcq_imageGrid__UcHs2",Me="ImageMcq_imageContainer__7advl",He="ImageMcq_selection__iD9h+";function We(e){var n=(0,m.u)(),o=(0,r.v9)((function(n){var o=n.runState.values[e.option.qualifiedCode];return{showAnswer:"undefined"==typeof(null===o||void 0===o?void 0:o.relevance)||o.relevance,checked:(null===o||void 0===o?void 0:o.value)||!1}}),r.wU),t=(0,r.I0)(),i=function(n,o){t((0,z.T7)({componentCode:n,value:o})),t({type:"SET_DIRTY",componentCode:n}),t({type:"SET_DIRTY",componentCode:e.parentCode})},a=e.option.image?"url('".concat((0,Pe.pT)(e.option.image),"')"):"0";return(0,y.jsxs)(Re.ZP,{item:!0,xs:12/e.columns,children:[(0,y.jsx)(Ue.Z,{className:Me,onClick:function(){return i(e.option.qualifiedCode,!o.checked)},style:{backgroundImage:a,backgroundColor:n.palette.background.default,margin:e.spacing+"px",height:e.imageHeight+"px",border:o.checked?"2px solid ".concat(n.palette.primary.main):"2px solid transparent"},children:(0,y.jsx)(B.Z,{className:He,onChange:function(n){return i(e.option.qualifiedCode,!o.checked)},checked:o.checked})}),!e.hideText&&(0,y.jsx)(q.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.option.content.label})]},e.option.code)}var Ye=function(e){var n=(0,a.useRef)(null),o=(0,a.useState)(800),t=(0,i.Z)(o,2),r=t[0],l=t[1];(0,a.useEffect)((function(){var e;l(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetWidth)}),[n]);var d=(r-e.component.columns*e.component.spacing*2)/e.component.columns/(e.component.imageAspectRatio||1);return(0,a.useEffect)((function(){var e=function(){var e;l(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,y.jsx)(Re.ZP,{ref:n,container:!0,className:Ae,children:e.component.answers.map((function(n){return(0,y.jsx)(We,{option:n,spacing:e.component.spacing,columns:e.component.columns,hideText:e.component.hideText,parentCode:e.component.qualifiedCode,imageHeight:d},n.qualifiedCode)}))})},Be=o(52791),Ge=o(71287),Qe="Ranking_dragContainer__KRWko",Oe="Ranking_rankingItem__YvbTh";var Ke=function(e){var n=(0,r.I0)(),o=(0,r.v9)((function(n){var o={};return e.component.answers.forEach((function(e){o[e.qualifiedCode]=n.runState.values[e.qualifiedCode].value})),o}),r.wU),i=(0,r.v9)((function(n){var o={};return e.component.answers.forEach((function(e){n.runState.order?o[e.qualifiedCode]=n.runState.order[e.qualifiedCode]:o[e.qualifiedCode]=n.runState.values[e.qualifiedCode].order+1})),o}),r.wU),a=function(e){var n=0;return Object.keys(e).forEach((function(o){e[o]>n&&(n=e[o])})),n},l=function(e,n,t){d({draggableId:e,source:{droppableId:n,index:t},destination:{droppableId:"source"==n?"answer":"source",index:a("source"==n?o:i)}})},d=function(a){var r=(0,t.Z)({},i);a.destination&&("answer"==a.destination.droppableId&&"source"==a.source.droppableId?e.component.answers.forEach((function(e){e.qualifiedCode==a.draggableId?(r[e.qualifiedCode]=void 0,n((0,z.T7)({componentCode:a.draggableId,value:a.destination.index+1}))):+o[e.qualifiedCode]>=a.destination.index+1?n((0,z.T7)({componentCode:e.qualifiedCode,value:o[e.qualifiedCode]+1})):+i[e.qualifiedCode]>=a.source.index+1&&(r[e.qualifiedCode]=r[e.qualifiedCode]-1)})):"answer"==a.destination.droppableId&&"answer"==a.source.droppableId?e.component.answers.forEach((function(e){e.qualifiedCode==a.draggableId?n((0,z.T7)({componentCode:a.draggableId,value:a.destination.index+1})):+o[e.qualifiedCode]>a.source.index+1&&+o[e.qualifiedCode]<=a.destination.index+1?n((0,z.T7)({componentCode:e.qualifiedCode,value:o[e.qualifiedCode]-1})):+o[e.qualifiedCode]<a.source.index+1&&+o[e.qualifiedCode]>=a.destination.index+1&&n((0,z.T7)({componentCode:e.qualifiedCode,value:o[e.qualifiedCode]+1}))})):"source"==a.destination.droppableId&&"answer"==a.source.droppableId?e.component.answers.forEach((function(e){e.qualifiedCode==a.draggableId?(r[e.qualifiedCode]=a.destination.index+1,n((0,z.T7)({componentCode:a.draggableId,value:void 0}))):+o[e.qualifiedCode]>a.source.index+1?n((0,z.T7)({componentCode:e.qualifiedCode,value:o[e.qualifiedCode]-1})):+i[e.qualifiedCode]>=a.destination.index+1&&(r[e.qualifiedCode]=r[e.qualifiedCode]+1)})):"source"==a.destination.droppableId&&"source"==a.source.droppableId&&e.component.answers.forEach((function(e){e.qualifiedCode==a.draggableId?r[e.qualifiedCode]=a.destination.index+1:+i[e.qualifiedCode]>a.source.index+1&&+i[e.qualifiedCode]<=a.destination.index+1?r[e.qualifiedCode]=r[e.qualifiedCode]-1:+i[e.qualifiedCode]<a.source.index+1&&+i[e.qualifiedCode]>=a.destination.index+1&&(r[e.qualifiedCode]=r[e.qualifiedCode]+1)})),n((0,z.A3)(r)))};return(0,y.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:(0,y.jsxs)(Ge.Z5,{onDragEnd:function(e){d(e)},children:[(0,y.jsx)(Ge.bK,{droppableId:"source",type:"ranking"+e.component.qualifiedCode,children:function(n){return(0,y.jsxs)(Be.Z,(0,t.Z)((0,t.Z)({className:Qe,sx:{backgroundColor:"background.default"},ref:n.innerRef},n.droppableProps),{},{children:[e.component.answers.filter((function(e){return!o[e.qualifiedCode]})).sort((function(e,n){return i[e.qualifiedCode]-i[n.qualifiedCode]})).map((function(e,n){return(0,y.jsx)(Ge._l,{draggableId:e.qualifiedCode,index:n,children:function(o){return(0,y.jsx)(Be.Z,(0,t.Z)((0,t.Z)((0,t.Z)({onDoubleClick:function(){return l(e.qualifiedCode,"source",n)},className:Oe,sx:{backgroundColor:"background.paper"},ref:o.innerRef},o.draggableProps),o.dragHandleProps),{},{children:e.content.label}))}},e.qualifiedCode)})),n.placeholder]}))}}),(0,y.jsx)(Ge.bK,{droppableId:"answer",type:"ranking"+e.component.qualifiedCode,children:function(n){return(0,y.jsxs)(Be.Z,(0,t.Z)((0,t.Z)({ref:n.innerRef},n.droppableProps),{},{className:Qe,sx:{backgroundColor:"background.default"},children:[e.component.answers.filter((function(e){return+o[e.qualifiedCode]>0})).sort((function(e,n){return o[e.qualifiedCode]-o[n.qualifiedCode]})).map((function(e,n){return(0,y.jsx)(Ge._l,{draggableId:e.qualifiedCode,index:n,children:function(o){return(0,y.jsx)(Be.Z,(0,t.Z)((0,t.Z)((0,t.Z)({onDoubleClick:function(){return l(e.qualifiedCode,"answer",n)},className:Oe,sx:{backgroundColor:"background.paper"},ref:o.innerRef},o.draggableProps),o.dragHandleProps),{},{children:e.content.label}))}},e.qualifiedCode)})),n.placeholder]}))}})]})})},Je=o(51276),Ve=o.n(Je),$e="Signature_signatureCanvas__nb7je",Xe="Signature_buttonContainer__1kw+6";var en=function(e){var n=(0,a.useState)(!1),o=(0,i.Z)(n,2),t=o[0],l=o[1],d=(0,a.useState)(!1),u=(0,i.Z)(d,2),c=u[0],s=u[1],v=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode];return null===o||void 0===o?void 0:o.value}),r.wU),m=(0,a.useRef)(),p=(0,r.I0)(),f=function(){var n=function(e){for(var n=e.split(","),o=n[0].match(/:(.*?);/)[1],t=atob(n[1]),i=t.length,a=new Uint8Array(i);i--;)a[i]=t.charCodeAt(i);return new Blob([a],{type:o})}(m.current.toDataURL("image/png"));(function(e,n,o){var t=new FormData;return t.append("file",n,o),ae.Z.upload(S.userInput.uploadUrl+S.responseId+"/"+e,t)})(e.component.qualifiedCode,n,"signature-".concat(e.component.qualifiedCode,".png")).then((function(n){p((0,z.T7)({componentCode:e.component.qualifiedCode,value:n.data}))})).catch((function(e){console.error(e)}))};return(0,a.useEffect)((function(){v&&v.stored_filename&&re(le(e.component.qualifiedCode,v.filename)).then((function(e){m.current.fromDataURL(e)}))}),[v]),(0,a.useEffect)((function(){v&&v.stored_filename&&re(le(e.component.qualifiedCode,v.filename)).then((function(e){l(!1),m.current.fromDataURL(e)}))}),[v]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Be.Z,{className:$e,sx:{backgroundColor:"background.default"},children:(0,y.jsx)(Ve(),{onBegin:function(){l(!0),s(!0)},ref:m,backgroundColor:"rgba(255,255,255,255)",canvasProps:{width:500,height:200}})}),(0,y.jsx)("br",{}),(0,y.jsxs)("div",{className:Xe,children:[(0,y.jsx)(te.Z,{onClick:function(){return m.current.clear(),s(!1),void l(!1)},disabled:!c,children:"Clear"}),(0,y.jsx)(te.Z,{onClick:function(){return f()},disabled:!t,children:"Submit"})]})]})},nn=o(57126),on=o(96710);var tn=function(e){var n=e.component.videoUrl?(0,Pe.pT)(e.component.videoUrl):"";return(0,m.u)(),e.component.videoUrl&&(0,y.jsx)("div",{style:{position:"relative",marginTop:"16px",paddingTop:e.component.audio_only?"10%":"56%"},children:(0,y.jsx)(on.Z,{url:n,loop:e.component.loop||!1,light:!0,controls:!0,config:{forceAudio:e.component.audio_only||!1},style:{backgroundColor:"black",position:"absolute",top:"0",left:"0"},volume:1,width:"100%",height:"100%"})})};var an=function(e){var n=e.component.imageUrl?(0,Pe.pT)(e.component.imageUrl):"";return e.component.imageUrl&&(0,y.jsx)("img",{style:{width:"100%"},src:n})},rn="ImageRanking_imageGrid__67uZQ",ln="ImageRanking_imageContainer__jOv2R",dn="ImageRanking_rankContainer__eqKqn",un="ImageRanking_rankValue__sx8LG";function cn(e){var n=(0,m.u)(),o=(0,r.v9)((function(n){var o=n.runState.values[e.option.qualifiedCode];return{showAnswer:"undefined"==typeof(null===o||void 0===o?void 0:o.relevance)||o.relevance,value:(null===o||void 0===o?void 0:o.value)||0}}),r.wU),t=e.option.image?"url('".concat((0,Pe.pT)(e.option.image),"')"):"0";return(0,y.jsxs)(Re.ZP,{item:!0,xs:12/e.columns,children:[(0,y.jsx)(q.Z,{className:ln,onClick:function(){return e.onClick()},display:"flex",justifyContent:"center",alignItems:"center",style:{backgroundImage:t,backgroundColor:n.palette.background.default,margin:e.spacing+"px",boxShadow:2,height:e.imageHeight+"px",border:o.checked?"2px solid ".concat(n.palette.primary.main):"2px solid transparent"},children:o.value>0&&(0,y.jsx)("div",{style:{height:Math.min(e.imageHeight,e.imageWidth)+"px",width:Math.min(e.imageHeight,e.imageWidth)+"px",borderRadius:Math.min(e.imageHeight,e.imageWidth)/2+"px",fontSize:Math.min(e.imageHeight,e.imageWidth)/2+"px"},className:dn,children:(0,y.jsx)("span",{className:un,style:{color:n.palette.primary.main},children:o.value})})}),!e.hideText&&(0,y.jsx)(q.Z,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:e.option.content.label})]},e.option.code)}var sn=function(e){var n=(0,r.v9)((function(n){var o={};return e.component.answers.forEach((function(e){o[e.qualifiedCode]=n.runState.values[e.qualifiedCode].value})),o}),r.wU),o=(0,r.I0)(),t=(0,a.useRef)(null),l=(0,a.useState)(800),d=(0,i.Z)(l,2),u=d[0],c=d[1];(0,a.useEffect)((function(){var e;c(null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetWidth)}),[t]);var s=(u-e.component.columns*e.component.spacing*2)/e.component.columns,v=s/(e.component.imageAspectRatio||1);return(0,a.useEffect)((function(){var e=function(){var e;c(null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,y.jsx)(Re.ZP,{ref:t,container:!0,className:rn,children:e.component.answers.map((function(t){return(0,y.jsx)(cn,{option:t,spacing:e.component.spacing,columns:e.component.columns,hideText:e.component.hideText,onClick:function(){return function(t){if(o({type:"SET_DIRTY",componentCode:e.component.qualifiedCode}),o({type:"SET_DIRTY",componentCode:e.parentCode}),+n[t]>0)o((0,z.T7)({componentCode:t,undefined:void 0}));else for(var i=Object.keys(n),a=i.map((function(e){return n[e]})),r=1;r<=i.length;r++)if(!a.includes(r))return console.log(r),void o((0,z.T7)({componentCode:t,value:r}))}(t.qualifiedCode)},parentCode:e.component.qualifiedCode,imageHeight:v,imageWidth:s},t.qualifiedCode)}))})},vn="NPS_choicesContainer__lQ9AR",mn="NPS_choice__TsW78",pn="NPS_choiceLabels__m--BQ";var fn=function(e){var n=(0,m.u)(),o=(0,r.I0)(),t=(0,r.v9)((function(n){return n.runState.values[e.component.qualifiedCode].value}),r.wU);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(q.Z,{className:pn,children:[(0,y.jsx)(q.Z,{children:e.component.content.lower_bound_hint}),(0,y.jsx)(q.Z,{children:e.component.content.higher_bound_hint})]}),(0,y.jsx)(q.Z,{className:vn,children:[0,1,2,3,4,5,6,7,8,9,10].map((function(i){var a=t==i;return(0,y.jsx)(q.Z,{className:mn,onClick:function(){return function(n){o((0,z.T7)({componentCode:e.component.qualifiedCode,value:n})),o({type:"SET_DIRTY",componentCode:e.component.qualifiedCode})}(i)},sx:{color:a?"background.paper":n.textStyles.text.color,backgroundColor:a?"primary.main":"background.paper"},children:i},i)}))})]})};var xn=function(e){console.log("rendering: "+e.component.code);var n=(0,j.Z)(),o=(0,r.v9)((function(n){var o=n.runState.values[e.component.qualifiedCode],t=n.runState.values.Survey.show_errors,i=n.template[e.component.qualifiedCode],a=null===o||void 0===o?void 0:o.validity,r=(t||i)&&!1===a;return{showQuestion:"undefined"===typeof(null===o||void 0===o?void 0:o.relevance)||(null===o||void 0===o?void 0:o.relevance),invalid:r,showValidation:r}}),r.wU),t=e.component.content.description&&(0,nn.oN)(e.component.content.description).length>0,i=e.component.content.label&&(0,nn.oN)(e.component.content.label).length>0,a=i||t;return o.showQuestion?(0,y.jsxs)(q.Z,{sx:{borderColor:o.invalid?"error.main":"grey.500",backgroundColor:"background.paper"},className:"".concat(De),children:[a&&(0,y.jsxs)("div",{className:Te,children:[i&&(0,y.jsx)(q.Z,{style:{fontFamily:n.textStyles.question.font,color:n.textStyles.text.color,fontSize:n.textStyles.question.size},children:(0,y.jsx)(fe,{className:"".concat(Ie," ").concat(ke),name:"label",lang:e.lang,elementCode:e.component.qualifiedCode,content:e.component.content.label})}),t&&(0,y.jsx)(q.Z,{className:Ne,children:(0,y.jsx)(fe,{elementCode:e.component.code,name:"description",lang:e.lang,content:e.component.content.description})})]}),function(){switch(e.component.type){case"date_time":case"date":case"time":return(0,y.jsx)(be,{component:e.component},e.component.qualifiedCode);case"scq":return(0,y.jsx)(P,{component:e.component},e.component.qualifiedCode);case"scq_array":return(0,y.jsx)(oe,{component:e.component},e.component.qualifiedCode);case"file_upload":return(0,y.jsx)(ue,{component:e.component},e.component.qualifiedCode);case"signature":return(0,y.jsx)(en,{component:e.component},e.component.qualifiedCode);case"mcq":return(0,y.jsx)(O,{component:e.component},e.component.qualifiedCode);case"number":return(0,y.jsx)(Y,{component:e.component},e.component.qualifiedCode);case"text":return(0,y.jsx)(A,{component:e.component},e.component.qualifiedCode);case"video_display":return(0,y.jsx)(tn,{component:e.component},e.component.qualifiedCode);case"image_display":return(0,y.jsx)(an,{component:e.component},e.component.qualifiedCode);case"image_ranking":return(0,y.jsx)(sn,{component:e.component},e.component.qualifiedCode);case"paragraph":return(0,y.jsx)(pe,{component:e.component},e.component.qualifiedCode);case"email":return(0,y.jsx)(H,{component:e.component},e.component.qualifiedCode);case"image_scq":return(0,y.jsx)(Le,{component:e.component},e.component.qualifiedCode);case"image_mcq":return(0,y.jsx)(Ye,{component:e.component},e.component.qualifiedCode);case"ranking":return(0,y.jsx)(Ke,{component:e.component},e.component.qualifiedCode);case"nps":return(0,y.jsx)(fn,{component:e.component},e.component.qualifiedCode);default:return""}}(),o.showValidation?(0,y.jsx)(N,{component:e.component}):""]}):""},gn="Group_textHeader__eTNzG",hn="Group_textDescription__ol3gC",Cn="Group_titleRow__MiTwq",yn="Group_groupHeader__b0JUF";var _n=function(e){var n=(0,j.Z)();return(0,r.v9)((function(n){var o=n.runState.values[e.group.code];return{showGroup:"undefined"===typeof(null===o||void 0===o?void 0:o.relevance)||o.relevance}}),r.wU).showGroup&&(e.group?function(){var o,t;return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsxs)(q.Z,{sx:{borderColor:"grey.500",boxShadow:1,backgroundColor:"background.paper"},className:"card-custom",children:[(0,y.jsx)(q.Z,{sx:{backgroundColor:"primary.main",height:"8px"},className:yn}),(0,y.jsxs)(q.Z,{sx:{backgroundColor:"background.paper"},className:Cn,children:[(0,y.jsx)("div",{className:gn,style:{fontFamily:n.textStyles.group.font,color:n.textStyles.group.color,fontSize:n.textStyles.group.size},children:(0,y.jsx)(fe,{elementCode:e.group.code,name:"label",lang:e.lang,content:null===(o=e.group.content)||void 0===o?void 0:o.label})}),(0,y.jsx)(q.Z,{className:hn,children:(0,y.jsx)(fe,{elementCode:e.group.code,name:"description",lang:e.lang,content:null===(t=e.group.content)||void 0===t?void 0:t.description})})]})]}),e.group&&e.group.questions?e.group.questions.filter((function(e){return e.inCurrentNavigation})).map((function(n){return(0,y.jsx)(xn,{component:n,lang:e.lang},n.code)})):""]})}():"")};var Sn=function(e){var n=(0,r.v9)((function(e){return{has_previous:e.runState.values.Survey.has_previous,has_next:e.runState.values.Survey.has_next}}),r.wU),o=(0,r.I0)(),t=(0,d.$)("common").t;return"end"==e.navigationIndex.name?"":(0,y.jsxs)("div",{className:"pb-10",children:[n.has_previous?(0,y.jsx)(te.Z,{variant:"contained",className:"mr-14",onClick:function(){o((0,z.lJ)())},children:t("previous")}):"",(0,y.jsx)(te.Z,{variant:"contained",onClick:function(){o((0,z.Jw)())},children:n.has_next?t("next"):t("finish")})]})},jn="Survey_surveyContent__xXZ5t",qn="Survey_surveyGroups__cshuO",wn="Survey_cardImage__vPKnl",Zn="Survey_surveyEmpty__BJGOc",bn="Survey_surveyPage__p07so",In=o(83708);var kn=function(e){var n=e.navigationIndex,o=e.survey,t=e.lang,i=(0,j.Z)();return"Error"==n.name?(0,y.jsx)(q.Z,{className:Zn,children:"Nothing to Show... Check Survey Design"}):(0,y.jsx)("form",{id:In.er,className:bn,style:{fontFamily:i.textStyles.text.font,color:i.textStyles.text.color,fontSize:i.textStyles.text.size},children:(0,y.jsx)("div",{className:jn,children:(0,y.jsxs)("div",{className:qn,children:[o.headerImage?(0,y.jsx)(w.Z,{className:wn,component:"img",image:(0,Pe.pT)(o.headerImage)}):null,o&&o.groups?o.groups.filter((function(e){return e.inCurrentNavigation})).map((function(e){return(0,y.jsx)(_n,{group:e,lang:t.code},e.code)})):"",(0,y.jsx)(Sn,{navigationIndex:n})]})})})},Tn={groupCard:"SurveyIndex_groupCard__plcrz",groupTitle:"SurveyIndex_groupTitle__1hB6-",questionTitle:"SurveyIndex_questionTitle__jmXeg",validationIcon:"SurveyIndex_validationIcon__vIkpE",bullet:"SurveyIndex_bullet__OduI5"},Nn=o(18384),Dn=o(74568);var zn=function(e){var n=(0,m.u)(),o=(0,r.I0)(),i=(0,r.v9)((function(e){return e.runState.values.Survey.relevance_map}),r.wU),a=(0,r.v9)((function(e){return e.runState.values.Survey.validity_map}),r.wU),l=function(n){return"group"==e.navigationIndex.name&&n==e.navigationIndex.groupId},d=function(n){return"question"==e.navigationIndex.name&&n==e.navigationIndex.questionId},u=function(n){return!l(n)&&"group"==e.navigationIndex.name},c=function(n){return!d(n)&&"question"==e.navigationIndex.name};return(0,y.jsx)("div",{className:Tn.surveyContent,children:e.survey&&e.survey.groups?e.survey.groups.filter((function(e){return i[e.code]&&"END"!=e.groupType})).map((function(r){return(0,y.jsxs)(Ue.Z,{onClick:function(){return n=r.code,void(u(n)&&o((0,z.cW)((0,t.Z)((0,t.Z)({},e.navigationIndex),{},{groupId:n}))));var n},className:Tn.groupCard,style:{backgroundColor:l(r.code)?"beige":n.palette.background.paper,cursor:u(r.code)?"pointer":"default"},children:[(0,y.jsxs)(Be.Z,{className:Tn.groupTitle,children:[(0,nn.oN)(r.content.label)," "]}),r.questions.filter((function(e){return i[e.code]})).map((function(n){return(0,y.jsxs)(Be.Z,{onClick:function(){return i=n.code,void(c(i)&&o((0,z.cW)((0,t.Z)((0,t.Z)({},e.navigationIndex),{},{questionId:i}))));var i},className:Tn.questionTitle,style:{backgroundColor:d(n.code)?"beige":"inherit",cursor:u(r.code)?"inherit":c(r.code)?"pointer":"default"},children:[a[n.code]?(0,y.jsx)(Nn.Z,{className:Tn.validationIcon}):(0,y.jsx)(Dn.Z,{className:Tn.bullet}),(0,nn.oN)(n.content.label)]},n.code)}))]},r.code)})):""})},En=o(22892),Fn=o(44666),Rn=o(75196),Un=o(62812),Pn=o(44812),Ln=o(40508),An=o(23571),Mn=o(93835);var Hn=function(e){(0,r.v9)((function(e){return{navigate:e.runState.navigate,lang:e.runState.lang}}),r.wU);var n=(0,r.I0)(),o=(0,d.$)("common").t;return(0,y.jsxs)(E.Z,{variant:"standard",children:[(0,y.jsx)(Ln.Z,{id:"change-lang-label",children:o("lang")}),(0,y.jsxs)(An.Z,{labelId:"change-lang-label",sx:{backgroundColor:"background.paper",color:"primary.main"},id:"ChangeLang",label:o("lang"),value:e.lang.code,onChange:function(e){n((0,z.TL)({lang:e.target.value}))},children:[(0,y.jsx)(Mn.Z,{value:e.lang.code,children:e.lang.langName}),e.additionalLang?e.additionalLang.map((function(e,n){return(0,y.jsx)(Mn.Z,{value:e.code,children:e.langName},n)})):""]})]})},Wn=o(98008);var Yn=a.memo(kn),Bn=a.memo(zn),Gn=function(){var e,n,o,x,g=a.useState(On),C=(0,i.Z)(g,2),j=C[0],q=C[1];window.handleBack=function(){var e=j===Kn;return q(On),e};var w=(0,r.v9)((function(e){return e.runState.data}),r.wU),Z=(0,r.v9)((function(e){return e.runState.navigation}),r.wU),b=(0,a.useState)(null),I=(0,i.Z)(b,2),k=I[0],T=I[1],N=(0,d.$)("common").i18n,D=(0,r.I0)(),E=window.location.search,F=function(e){var n=e.get("lang"),o=e.get("response_id"),t="http://"+e.get("url")+"/api/"+e.get("sid")+"/navigate",i="http://"+e.get("url")+"/api/"+e.get("sid")+"/runtime.js",a="http://"+e.get("url")+"/survey/upload/"+e.get("sid")+"/",r="http://"+e.get("url")+"/survey/"+e.get("sid")+"/upload/",l=e.get("offline"),d=JSON.parse(e.get("navigation_direction"));return d||o?d||(d={name:"RESUME"}):d={name:"START"},{url:t,scriptUrl:i,uploadUrl:a,uploadPreviewUrl:r,lang:n,responseId:o,navigationDirection:d,offline:l}}(new URLSearchParams(E));(0,a.useEffect)((function(){Z&&(q(Qn),T(null),function(e,n,o){var i=(0,t.Z)((0,t.Z)({},n),{},{responseId:o});return e.offline?new Promise((function(e,n){window.Android.navigate(JSON.stringify(i)),window.navigateOffline=function(n){e({data:n})}})):ae.Z.post(e.url,i)}(F,Z,w.responseId).then((function(e){D((0,z.zc)(e.data)),N.changeLanguage(e.data.lang.code)})).catch((function(e){T({errorType:"click",message:e.message})})))}),[Z]),(0,a.useEffect)((function(){h.Bc.includes(N.language)?document.dir="rtl":document.dir="ltr"}),[N.language]),(0,a.useEffect)((function(){var e;P()&&(T(null),(e=F.scriptUrl,new Promise((function(n){var o=document.createElement("script");o.async=!1,o.src=e,document.body.appendChild(o),o.addEventListener("load",n,{once:!0})}))).then((function(){(function(e){var n={responseId:e.responseId,lang:e.lang,navigationDirection:e.navigationDirection};return e.offline?new Promise((function(e,o){window.Android.navigate(JSON.stringify(n)),window.navigateOffline=function(n){e({data:n})}})):ae.Z.post(e.url,n)})(F).then((function(e){"Error"!=e.data.navigationIndex.name&&(D((0,z.zc)(e.data)),Object.isFrozen(S)||(S.userInput=F,S.responseId=e.data.responseId,Object.freeze(S))),N.changeLanguage(e.data.lang.code)})).catch((function(e){console.error(e),T({errorType:"startup",message:e.message})}))})))}),[]);var R=a.useCallback((0,u.Z)((0,t.Z)((0,t.Z)({},(0,In.ph)(null===w||void 0===w||null===(e=w.survey)||void 0===e?void 0:e.theme)),{},{direction:h.Bc.includes(N.language)?"rtl":"ltr"})),[N.language,null===w||void 0===w||null===(n=w.survey)||void 0===n?void 0:n.theme]),U=(0,p.Z)({key:h.Bc.includes(N.language)?"muirtl":"muiltr",stylisPlugins:h.Bc.includes(N.language)?[v.Ji,s.Z]:null});function P(){return!(null!==w&&void 0!==w&&w.survey)}var L=function(e){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&q(e?Kn:On)}};return(0,y.jsx)(m.C,{value:U,children:(0,y.jsx)(c.Z,{theme:R,children:(0,y.jsxs)(f.Z,{onClick:L(!1),onKeyDown:L(!1),children:[!P()&&(0,y.jsxs)("div",{className:l.mainContainer,children:[(0,y.jsx)(En.Z,{position:"fixed",children:(0,y.jsxs)(Fn.Z,{children:[(0,y.jsx)(Rn.Z,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:L(!0),children:(0,y.jsx)(Wn.Z,{})}),(0,y.jsx)(Un.Z,{variant:"h5",component:"div",sx:{flexGrow:1},children:null===w||void 0===w||null===(o=w.survey)||void 0===o||null===(x=o.content)||void 0===x?void 0:x.label})]})}),(0,y.jsx)(Fn.Z,{}),(0,y.jsx)(Yn,{survey:null===w||void 0===w?void 0:w.survey,navigationIndex:null===w||void 0===w?void 0:w.navigationIndex,lang:null===w||void 0===w?void 0:w.lang,additionalLang:null===w||void 0===w?void 0:w.additionalLang,error:k},"Survey"),(0,y.jsx)(Pn.ZP,{anchor:"left",transitionDuration:j!==Qn?500:0,open:j==Kn,onClose:L(!1),children:(0,y.jsxs)("div",{className:l.drawer,children:[(0,y.jsx)(Hn,{lang:null===w||void 0===w?void 0:w.lang,additionalLang:null===w||void 0===w?void 0:w.additionalLang}),(0,y.jsx)(Bn,{className:l.surveyIndex,navigationIndex:null===w||void 0===w?void 0:w.navigationIndex,survey:null===w||void 0===w?void 0:w.survey})]})})]}),k?(0,y.jsx)(_,{error:k,variant:"toast"}):null]})})})},Qn="COLLAPSE_IMMEDIATE",On="COLLAPSE",Kn="EXPAND"}}]);
//# sourceMappingURL=677.126dec50.chunk.js.map